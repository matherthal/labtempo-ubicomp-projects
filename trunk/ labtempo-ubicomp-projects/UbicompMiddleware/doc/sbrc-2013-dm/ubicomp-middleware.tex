\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}
\usepackage[space]{grffile}

\usepackage[brazil]{babel}   
\usepackage[latin1]{inputenc}  

     
\sloppy

\title{Um \textit{Framework} de Desenvolvimento de Aplicações Ubíquas em Ambientes Inteligentes}
%acho q \\ pula linha
\author{Matheus Erthal\inst{1}, Douglas Mareli\inst{1}, David Barreto\inst{1}, Orlando Loques\inst{1}}


\address{Instituto de Computação -- Universidade Federal Fluminense (UFF)\\
  Niterói -- RJ -- Brasil
% \nextinstitute
%   Department of Computer Science -- University of Durham\\
%   Durham, U.K.
% \nextinstitute
%   Departamento de Sistemas e Computação\\
%   Universidade Regional de Blumenal (FURB) -- Blumenau, SC -- Brazil
  \email{\{merthal,dmareli,dbarreto,loques\}@ic.uff.br}
}

\begin{document} 

\maketitle

%%%%%%%%%%%%%%
%  RESUMOS   %
%%%%%%%%%%%%%%
\begin{abstract}
With recent advances in mobile computing and wireless communication technologies, we can see the emergence of a favorable construction of ubiquitous applications. This paper proposes a new framework for building such applications, providing a conceptual and implementation tools. We propose abstractions that allow developers to handle the resources distributed in the environment in a simple and homogeneous, and interpret the context information. In order to demonstrate the feasibility of the proposal, the concepts were implemented in a platform called SmartAndroid. This platform also includes an interface prototyping applications ubiquitous environments where settings can be tested before the acquisition of all devices, and interface composition of contextual rules, where end users can set preferences on the environment.
\end{abstract}


\begin{resumo} 
Com os recentes avanços da computação móvel e nas tecnologias de comunicação sem fio, percebe-se o surgimento de um cenário favorável à construção de aplicações ubíquas. Este trabalho propõe um novo \textit{framework} para a construção de tais aplicações, provendo um ferramental conceitual e de implementação. São propostas abstrações que possibilitam aos desenvolvedores lidar com os recursos distribuídos no ambiente de maneira simples e homogênea, e interpretar as informações de contexto. A fim de se demonstrar a viabilidade da proposta, os conceitos foram implementados em uma plataforma chamada \textit{SmartAndroid}. Sobre esta plataforma foi implementada uma interface de prototipagem de aplicações ubíquas onde configurações de ambientes podem ser testados antes da aquisição de todos os dispositivos; e uma interface de composição de regras de contexto, onde usuários finais podem definir suas preferências no ambiente.
\end{resumo}


%%%%%%%%%%%%%%
% INTRODUÇÃO %
%%%%%%%%%%%%%%
\section{Introdução}
%(motivação: jogar pra cima ubicomp introduzindo a inteligência ambiental como aplicação funamental)
A Computação Ubíqua, como proposta por Weiser na década de 90~\cite{weiser1991computer}, descrevia uma mudança no paradigma de interação entre o usuário e os sistemas computacionais. Weiser previu o surgimento do que chamou de "computação calma", onde a interação entre os usuários e os computadores ocorre de forma natural, sem ações explicitas. Uma aplicação ubíqua identifica as necessidades do usuário obtendo informação de contexto através de sensores, e provê serviços através de atuadores. Este tipo de sistema de aplicações é associado a um espaço denominado ambiente inteligente (AmbI)~\cite{augusto2007ambient}. 
   
%(as dificuldades, ?mas desenvolver é caro, difícil?, etc.)
A construção e manipulação de aplicações ubíquas representam um grande desafio para desenvolvedores com pouco conhecimento técnico e recursos escassos. Alguns problemas estão mais em evidência. Na construção e teste de aplicações surge a necessidade de um contingente de recursos como dispositivos embarcados e espaço físico. Também há uma dificuldade de estabelecer um protocolo comum de comunicação entre os componentes do sistema distribuído. E por fim, a interatividade das aplicações ubíquas é dificultada dependendo da quantidade e variedade de informações de contexto disponível no ambiente. Estes são alguns dos desafios que motivam a proposta de um \textit{framework} com o objetivo de facilitar a aplicação dos conceitos de computação ubíqua em ambientes inteligentes. %TODO: (matheus) Está meio confuso o meio deste parágrafo, depois a gente dá uma olhada

%(o q os outros tem feito, falar rapidamente)
Muitos trabalhos tem por objetivo definir, no estado da arte, um arcabouço de técnicas para construção e gerenciamento de aplicações ubíquas~\cite{helal2005gator, cardoso2006, ranganathan2005olympus}. Em~\cite{augusto2007ambient} são apontados desafios na aquisição de conhecimentos do ambiente. Em~\cite{helal2005gator} é proposto um \textit{middleware} entre a camada física, a qual compreende os sensores e atuadores, e a camada de aplicação, na qual se encontram o ambiente de desenvolvimento e as aplicações ubíquas. Em~\cite{cardoso2006} são propostos serviços para gerenciar componentes representativos do ambiente no nível de \textit{middleware}. Uma variedade de dispositivos e propriedades é encontrada no AmbI. Como exemplo há a casa inteligente, onde televisores, termômetros, smartphones, etc. podem ser encontrados inseridos em cômodos com suas especificidades, as quais compõem as propriedades deste ambiente. Preocupado em organizar estes componentes, o trabalho em \cite{ranganathan2005olympus} propõe uma estrutura de representação da camada física em hierarquia de tipos através de ontologia. Esta estruturação permite ampliar o escopo de operações de suporte de um sistema ubíquo.

%(?Este trabalho... vamos propor um protótipo ...?, nosso trabalho tem q ganhar. ?Tem que caber o smartandroid inteiro? - ARs)
Neste trabalho é proposto um \textit{framework} de desenvolvimento de aplicações ubíquas em AmbI. O objetivo é dar suporte a programação, teste e execução de aplicações permitindo lidar de forma consistente com sistemas de grande complexidade. Este \textit{framework} destaca-se por cobrir grande parte dos desafios destacados na computação ubíqua~\cite{araujo2003}, como o tratamento da heterogeneidade de dispositivos, o tratamento de informações de contexto e a descoberta de serviços. A heterogeneidade é tratada através da definição de um Modelo de Componentes Distribuídos, no qual o componente básico tem uma estrutura uniforme definida como um Agente de Recurso (AR). Segundo~\cite{cardoso2006}, AR é a entidade de coleta de informações de contexto. Neste trabalho, esta definição é ampliada para qualquer módulo que interage com elementos deste modelo de componentes. Para o tratamento de informações de contexto é proposto o Modelo de Contexto que consiste de um conjunto de interpretadores de contexto. Além disso, no \textit{framework} é proposta a aplicação de Interface de Prototipagem e Gerenciamento de Aplicações Pervasivas (IPGAP) (Trabalho submetido ao SBRC 2013) que permite a visualização e o teste de aplicações ubíquas, as quais mesclam componentes reais e virtuais. %TODO: (matheus) nós vamos citar a comutação ubíqua com letras maiúsculas ou minúsculas? Temos q decidir de pronto.
%TODO: (matheus) Douglas, nós não vamos citar o david e a ipgap dessa maneira aí. Nós temos que falar que essa parte tb foi submetida para o SBRC 2013

%(mostrar uma prova de conceito: 1 (exatamente) aplicação, seja a de saúde, ou outra)
A qualidade de suporte do \textit{framework} foi avaliada durante o processo de transformação de uma aplicação com funcionamento estritamente local em uma aplicação ubíqua. Com isso foi possível provar conceitualmente que o \textit{framework} facilita o processo de construção de aplicações ubíquas. Para testar a eficiência do Modelo de Contexto, foi construída uma aplicação que explora os mecanismos de comunicação utilizados no modelo de componentes distribuídos e utiliza as informações básicas de um agente de recurso, como localização e identificação de tipo.

%(resumo das seções, falar das próximas seções)
O restante deste 
artigo é organizado da seguinte forma: a Seção 2 apresenta os conceitos básicos utilizados ao longo do texto. A Seção 3 apresenta a arquitetura geral do \textit{framework} incluindo o Modelo de Componentes Distribuídos e o Modelo de Contexto. Na Seção 4 é apresentada uma prova de conceito demonstrando a eficiência do \textit{framework} em construir aplicações ubíquas e demonstrada uma aplicação que explora, através da implantação em uma \textit{smarthome}, as principais características do AmbI. Após a avaliação, a Seção 5 apresenta uma comparação com trabalhos relacionados. E para finalizar, a Seção 6 apresenta as conclusões e trabalhos futuros.



%%%%%%%%%%%%%%%%
%    BASICO    %
%%%%%%%%%%%%%%%%
\section{Conceitos Básicos}

%[(introduzir e motivar os conceitos abordados por nossa proposta)
Os \textit{frameworks} para aplicações ubíquas costumam utilizar como base os conceitos de Inteligencia Ambiental~\cite{augusto2007ambient}, de Computação Sensível ao Contexto~\cite{Dey2001} e de Prototipagem de Aplicações Ubíquas~\cite{weis2007prototyping}. A Inteligencia Ambiental define o espaço onde estas aplicações funcionam. Os comportamentos de sistemas ubíquos são definidos a partir de técnicas aplicadas na Computação Sensível ao Contexto. E a prototipagem é utilizada para manipular e testar o funcionamento do conjunto de aplicações no ambiente.
  
%(ambientes inteligentes)
A Computação Ubíqua se inclui dentre as inúmeras áreas abrangidas pela Inteligência Ambiental. Sistemas com enfoque nesta área geralmente possuem uma arquitetura em camadas como base. Na camada mais profunda encontra-se o espaço com seus ocupantes, em uma camada acima estão os sensores captando suas interações e atuadores promovendo ações com estes indivíduos. Uma camada intermediária (\textit{middleware}) é definida entre as tomadas de decisões e as interações com o ambiente. As decisões podem ser tomadas por um ocupante ou através de mecanismos de inteligencia artificial. Além do \textit{middleware} como suporte a serviços, nosso \textit{framework} inclui um modelo de componentes, conceitos e mecanismos de comunicação, e um modelo e mecanismos de contexto. 

%smarthome como um tipo de ambiente inteligente
Um AmbI é o meio onde se agrega inteligencia computacional. Há diversos exemplos na literatura que utilizam especificações deste tipo de ambiente, dentre eles o termo ``smarthome'' (casa inteligente) se mostra como um dos mais populares. Há diversas propostas no estado da arte explorando este tipo de espaço~\cite{helal2005gator,augusto2007ambient,ranganathan2005olympus}. Estes trabalhos costumam explorar a heterogeneidade de dispositivos e as rotinas de seus ocupantes tendo a casa inteligente como cenário. Apesar do \textit{framework} proposto neste trabalho abranger qualquer tipo de AmbI, boa parte dos exemplos de aplicações focam um ambiente residencial típico de modo a facilitar sua apresentação.
 
%(modelo de componentes distrbuídos(agente de recurso como definição de componente básico))]
Para que as aplicações ubíquas possam ser integradas a elementos de baixo nível do AmbI é necessário que este espaço seja representado no nível de \textit{middleware}. Este trabalho define um modelo de componentes arquiteturais distribuídos \cite{brown1998dcom} para representar de forma geral sistemas construídos pelo nosso \textit{framework}.

\subsection{Prototipagem de Aplicações Pervasivas}
%falar sobre trabalho do david e da importancia de testar apicaçoes ubíquas
No contexto do \textit{framework}, a prototipagem de aplicações pervasivas é fundamental para a depuração e teste em um AmbI. Num desenvolvimento paralelo, a IPGAP é proposta como um aparato ferramental que permite ao desenvolvedor de aplicações ter acesso a estes benefícios. Além disso, a IPGAP possui uma  Interface Gráfica de Usuário (\textit{Graphic User Interface} -- GUI) que proporciona ao usuário final controlar remotamente recursos do ambiente.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.8\textwidth]{imgs/ipgap/ipgap.PNG}
  \caption{Interface de Prototipagem}
  \label{fig:ipgap}
\end{figure}

%detalhar elementos da IPGAP
Boa parte das capacidades da IPGAP são proporcionadas pelas seguintes funcionalidades: mapeamento do ambiente, instalação de novas aplicações ubíquas e ligação com aplicações já existentes. Através destas funcionalidades é possível ter um ambiente preenchido de recursos simulados (como televisor virtual, geladeira virtual, etc.) e fazê-los executar junto a recursos reais que podem ser representados em sua GUI. A GUI da \mbox{IPGAP} foi elaborada apropriadamente para o universo dos  \textit{tablets} e \textit{smartphones}, nela podendo ser visualizados os recursos reais e virtuais localizados no mapa, como ilustrado na Figura~\ref{fig:ipgap}.     

%demonstrar uso em nossa proposta com exemplo (vide figura)
Na Figura~\ref{fig:ipgap} é ilustrado um \textit{tablet} executando o aplicativo da IPGAP e \textit{smartphones} simulando recursos como TV, lampada e termômetro. Através da IPGAP é possível visualizar e instanciar cada um desses elementos e representá-los no mapa. Repare que na figura há outros recursos além dos representados pelos \textit{smartphones}, estes são recursos criados na própria IPGAP. Com isso o desenvolvedor de aplicações não fica limitado pela disponibilidade de recursos físicos podendo simular os elementos indisponíveis.

%(descrever sua utilização na proposta)
O \textit{framework} proposto permite ao desenvolvedor criar aplicações nas dimensões e quantidade que desejar para um ambiente real. A IPGAP permite verificar a viabilidade do funcionamento das aplicações desenvolvidas em ambiente próximo ao real. As restrições deste AmbI real são semelhantes as que ocorrem no AmbI simulado na IPGAP. Isto permite avaliar o desempenho antes da implantação efetiva das aplicações.

\subsection{Computação Sensível ao Contexto}
%introduzir o conceito de contexto
O contexto exerce um papel de fundamental importância na computação ubíqua. Durante a década de 90, diversos autores procuraram definir contexto, muitas delas pouco apuradas. Baseados em definições de autores anteriores, Dey e Abowd~\cite{Dey2001} compuseram a seguinte definição para contexto:

\begin{quotation}
  ``Qualquer informação que pode ser usada para caracterizar a situação de entidades (i.e., pessoa, lugar ou objeto) que são consideradas relevantes para a interação entre um usuário e uma aplicação, incluindo o próprio usuário e aplicação. Contexto é tipicamente a localização, identidade, e estado de pessoas, grupos, e objetos computacionais e físicos''
\end{quotation}

Segundo~\cite{Dey2001} três entidades de contexto foram identificadas como de maior importância, são elas: lugares, pessoas e coisas. No AmbI, ``Lugares'' são os cômodos, os andares de uma edificação, ou espaços em geral; ``Pessoas'' são indivíduos que povoam o ambiente e interagem com o mesmo; e ``Coisas'' são representações virtuais de objetos físicos ou componentes de \textit{software}.

Após a identificação das entidades, são introduzidas quatro categorias de contexto essenciais: identidade, localização, estado e tempo. ``Identidade'' corresponde à identificação única de uma entidade. ``Localização'' não só diz respeito à posição de uma pessoa e sua inserção em uma área ou subárea, mas diz também respeito à proximidade de uma pessoa em relação à outra, ou à uma coisa. ``Estado'' identifica características intrínsecas da entidade (e.g., temperatura de uma sala, sinal vital de uma pessoa). ``Tempo'' é uma informação de contexto quando ajuda a caracterizar a situação, geralmente usado com outras informações de contexto, indicando um instante ou período durante o qual alguma informação contextual é conhecida ou relevante.

%descrever sobre importancia para ambientes inteligentes (áreas relacionadas e aplicações)
Uma meta da aquisição de contexto é determinar o que o usuário está tentando realizar, por exemplo, se uma pessoa sai de casa e deixa a torneira aberta, pode ser que este a tenha esquecido. A aquisição do contexto de forma automatizada contribui para a construção de aplicações para ambientes inteligentes que, de outra maneira, seriam inviáveis, por exigir a entrada de dados ou comandos diretamente por parte dos usuários.

%descrever importancia em nossa proposta   
O \textit{framework} proposto neste trabalho oferece uma maneira de se representar os recursos espalhados pelo ambiente e os recursos no nível simulado de software (vide Seção~\ref{subsec-contexto}), tornando homogênea a comunicação entre os componentes, de tal maneira que é simples se declarar e consultar as informações de contexto. Através de serviços padronizados é possível se encontrar as entidades e obter seu contexto, onde esta pesquisa pode ser feita tanto utilizando a identificação da entidade, como o seu tipo ou localização física. A sensibilidade ao contexto é caracterizada pela reação do sistema aos eventos de mudança do contexto, portanto, o \textit{framework} introduz o Interpretador de Contexto (vide Seção~\ref{subsubsec-ic}).
%TODO: terminar de escrever este paragrafo!

%%%%%%%%%%%%%%%%
%  FRAMEWORK   %
%%%%%%%%%%%%%%%%
\section{Proposta do \textit{Framework}}

%definição geral do framework
O \textit{framework} provê facilidades e padrões de programação a aplicações sensíveis ao contexto focadas em AmbI (incluindo \textit{smarthomes}). O \textit{framework} torna mais transparente as partes da aplicação que envolvem a comunicação, a aquisição de contexto e a localização de recursos no ambiente.

%definição da unidade básica do framework (AR)
Ao invés de se lidar diretamente com sensores e atuadores espalhados no ambiente, o \textit{framework} utiliza, como abstração, componentes chamados Agentes de Recursos (AR). Os ARs são elementos de primeira ordem da plataforma, representando recursos de hardware ou software disponíveis no ambiente. Eles têm como responsabilidade coletar as diversas medidas dos sensores ou componentes de software presentes no contexto de execução do das aplicações~\cite{bezerrauso}. Os ARs resolvem a complexidade de tratamento com os componentes de baixo nível e disponibilizam interfaces padrões de interação tanto local como em rede. Os ARs podem ser criados no AmbI para representar, por exemplo: uma televisão que expõe suas informações de contexto e provê serviços para as aplicações; sensores de temperatura da casa; sensores de vazamento de gás na cozinha; um medidor de pressão arterial; um atuador para fechar as janelas; etc. 

%definiçao de uso geral da AR
O AR é a unidade básica de modularização do ambiente distribuído proposto pelo \textit{framework}, assim sendo, o mesmo pode também ser utilizado na modelagem das aplicações. Se uma aplicação necessita de uma entidade distribuída, pode representá-la através de um AR. Por exemplo, um desenvolvedor poderia construir um jogo, representando através de ARs os jogadores, o tabuleiro, os monstros, recursos do cenário, etc. 

%introduzindo o SGAR
Para possibilitar a comunicação entre os diferentes ARs, o SmartAndroid dispõe de um serviço que gerencia estes recursos, e mantém informações de identificação e localização dos mesmos, dentre outras. Este serviço chama-se Serviço de Gerenciamento de Agentes de Recursos (SGAR) e encontra-se centralizado no ambiente distribuído. Como apresentado na Figura~\ref{fig:suporte}, o SGAR é composto por três componentes, ou serviços: o Serviço de Registro de Recurso (SRR), o Serviço de Descoberta de Recursos (SDR) e o Serviço de Localização de Recursos (SLR). A diferença entre o SDR e o SLR está no fato de que o primeiro se refere à localização na rede de computadores, e o segundo se refere à localização física do dispositivo no ambiente. %TODO: antes de falar isso, enfatizar um pouco o problema da localização

O SGAR tem por objetivo aumentar a visibilidade das informações de contexto dos ARs e tornar a comunicação transparente para o programador das aplicações. A instalação e desinstalação de aplicações ubíquas são viabilizadas pelo SRR. O reconhecimento dos ARs por outras aplicações é possibilitado pelo SDR. E as localizações de ARs de elementos físicos do AmbI podem ser consultadas através da SLR. 
%TODO: talvez possamos falar aqui mesmo que aplicações poderiam ser instaladas no ambiente e inclusive compartilhar informações

% \begin{figure}[ht]
%   \centering
%   \includegraphics[width=.7\textwidth]{imgs/arq-camadas-interpretador.png}
%   \caption{Camada de Interpretação de Regra}
%   \label{fig:cmd-intp}
% \end{figure}

\subsection{Modelo de Componentes Distribuídos}%falar sobre interfaces de serviços do AR e os serviços de descoberta, registro e localização

%descrever de forma geral o componente distribuido
O modelo de componentes distribuídos mapeia as aplicações ubíquas em um ambiente inteligente genérico. Em geral este mapeamento é dividido em três camadas essenciais: 
\begin{enumerate}
  \item A camada física ou conceitual dos recursos
  \item A camada intermediária (\mbox{\textit{middleware}}) com os ARs dos respectivos recursos e Interpretadores de Contexto
  \item A camada das aplicações que agregam os componentes do \mbox{\textit{middleware}} em aplicativos. 
\end{enumerate}
O modelo de componentes distribuído pode variar dentre estas camadas de acordo com as aplicações ubíquas implantadas no ambiente.

%descrever um exemplo de modelo de componente distribuído (figura arqGeral)
Na Figura~\ref{fig:arquitetura} exemplifica-se uma \textit{smarthome} sendo gerenciada pelo \textit{framework}. Na camada de recursos estão componentes físicos ou conceituais. Os recursos conceituais são aqueles simulados através de outro tipo de dispositivos (como \textit{smartphones} e \textit{tablets}) ou criados virtualmente através da IPGAP. A figura apresenta como recursos exemplo um televisor, uma cama e um fogão. No \mbox{\textit{middleware}} são apresentados os seus ARs representativos, além do AR de interpretação de contexto para verificar se o fogão foi esquecido ligado por um ocupante da casa. Este interpretador verifica se alguém está presente na cama e por quanto tempo o fogão está ligado, se um tempo limite for ultrapassado uma ação é disparada para que o fogão seja desligado. Os ARs referentes a cama e ao fogão coletam os dados destes recursos físicos e os representam na camada do \mbox{\textit{middleware}}, isto permite que estas informações sejam utilizadas pelos componentes da camada da aplicação.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/framework/arquiteturaGeral.PNG}
  \caption{Arquitetura do \textit{Framework}}
  \label{fig:arquitetura}
\end{figure}

%descrever a estrutura do agente 
O AR foi definido para padronizar os componentes de interação do ambiente, e dessa forma resolver questão da heterogeneidade apresentada em \cite{araujo2003}. A sua estrutura geral é composta por nome único, tipo, localização, código(que define a classe) com variáveis e métodos e uma lista de interessados em informações de contexto. O tipo é definido por uma hierarquia que vai se especializando desde o mais genérico (raiz) até o tipo da classe (que representa o código do AR corrente). Todo AR possui o tipo raiz como super pai. A lista de interessados possui registros com dois campos, um com a variável do AR corrente e outro com a referência do outro AR interessado nesta informação. 

%descrição do uso de tipo no framework
A definição de tipo do AR é uma etapa importante para a definição de aplicações ubíquas. Em \cite{ranganathan2005olympus} é utilizado uma ontologia para classificar entidades (como os ARs) para possibilitar a consulta a partir de propriedades predefinidas. Uma aplicação de apresentação de slides é utilizada como exemplo para ilustrar a importância desta ontologia. A aplicação consiste em mostrar os slides no mesmo cômodo residencial onde uma determinada pessoa se encontra. Então, ao invés de definir dispositivos específicos para realizar esta tarefa, a aplicação consulta por dispositivos com as seguintes propriedades: ser do tipo visual e estar no cômodo onde a pessoa alvo está presente. Assim, quando esta pessoa muda de local, o dispositivo instanciado para mostrar a apresentação passa a ser o correspondente ao mesmo local dela. Em nossa proposta, o SDR possui a busca por tipo que retorna instancias com propriedades predefinidas, tal como em \cite{ranganathan2005olympus}. A forma de utilização de instancias podem ser dinamicamente definidas por Interpretadores de Contexto (vide Seção~\ref{subsubsec-ic}).

%descrever instancia do agente (figura instanciaAR)
Para exemplificar um AR, um exemplo de instancia representando um televisor em ambiente residencial é ilustrado na Figura~\ref{fig:agente}. O nome identifica unicamente a TV no ambiente residencial ("tvDaSala"), a localização é definida como a sala de estar. O tipo "TV", nome da classe corrente, é definido como especialização do tipo "Visual". O código possui as variáveis e as operações específicas da classe. E a lista de interessados possui cada registro representando um interesse, o qual contém o campo da variável e outro campo com o AR interessado na mudança de valor da respectiva variável. Por exemplo, o registro da Figura~\ref{fig:agente} indica que o AR do celular está interessado na mudança de canal da TV. 

\begin{figure}[ht]
  \centering
  \includegraphics[height=.4\textwidth]{imgs/suporte/instanciaAR.PNG}
  \caption{Instância do Agente de Recurso}
  \label{fig:agente}
\end{figure}

%descrever as portas de interação (VC e operações) do AR 
Um AR armazena o seu estado por meio de seus atributos declarados e os expõe através da criação de Variáveis de Contexto (VC), como será visto na Seção~\ref{subsubsec:cv}. Da mesma forma ele pode declarar suas possíveis Operações (OP), como será estudado na mesma seção. Do ponto de vista da arquitetura, as VCs são as portas de saída de informação, e as OPs são as portas de entrada de comando.
%Como pode-se ver na figura, as informações de contexto são armazenadas em variáveis e as funcionalidades de que o recurso dispõe são 
%As variáveis, como representado na Figura~\ref{fig:agente} armazenam o estado do AR, e os métodos do exemplo possibilitam acessar as funcionalidades dos ARs, ou Operações. Através desses recursos, um AR pode expor o acesso à sua informação de contexto através da criação de Variáveis de Contexto
%Em tempo de programação, pode-se declarar quais são 

\subsubsection{Suporte ao Gerenciamento de Recursos} \label{subsubsec-sgr}

%falar sobre uso geral do SGAR (figura Suporte)
O SGAR é o responsável por gerenciar o conjunto de ARs no AmbI. O controle de registro (através do SRR) e descoberta (através do SDR) de ARs segue a ideia geral sobre serviços de registro e descoberta de recursos apresentada em \cite{cardoso2006}. Neste trabalho foi acrescentado o SLR, o qual tem a função de localização física. A Figura~\ref{fig:suporte} ilustra as principais operações de cada serviço de suporte. O SRR é utilizado para registrar ou remover o registro, o SDR é utilizado na busca e o SLR na localização de ARs. Estas operações manipulam dados representativos dos respectivos ARs no Repositório de Recursos.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/suporte/suporte.PNG}
  \caption{Serviços de Suporte}
  \label{fig:suporte}
\end{figure}

%descrever estrutura de repositorio 
O Repositório de Recursos possui o Diretório de Recursos e o Mapa do ambiente. O Diretório contém os dados dos ARs armazenados conforme o tipo de cada um. Estes dados consistem do nome, tipo, localização e a referência de acesso. A referência de acesso permite a interação através do mecanismo de comunicação por invocação remota (RPC) (vide Seção~\ref{subsec-comunicacao}). O Mapa possui o conjunto de espaços físicos definidos no ambiente. Cada espaço possui uma área e um nome. No caso de uma \textit{smarthome} os cômodos da casa representam estes espaços. Cada entrada do Mapa referencia um conjunto de AR contidos no respectivo espaço como pode ser visto na Figura~\ref{fig:repositorio}.

%descrever exemplo da (figura repositorio)
Na Figura~\ref{fig:repositorio} é apresentada a organização de um conjunto de recursos no Repositório. Neste caso há três recursos registrados, uma TV ("tvDaSala"), e dois \textit{tablets} ("iPadQuarto" e "tabSala"). Os três fazem parte do conjunto de ARs do tipo "Audiovisual", estes tipos funcionam como subdiretórios de recursos. E por fim, o Mapa indexa cada um ao respectivo cômodo indicado pelo atributo de localização.

\begin{figure}[ht]
  \centering
  \includegraphics[height=.6\textwidth]{imgs/suporte/repositorio.png}
  \caption{Repositório de Recursos}
  \label{fig:repositorio}
\end{figure}


%descrever o serviço de registro
O SRR é responsável por adicionar, remover e inclusive atualizar informações sobre os ARs no Repositório de Recursos. Através deste serviço, as aplicações podem adicionar novos tipos no Diretório de Recursos e espaços no Mapa. E em cada AR pode ser atualizada a informação sobre localização neste Mapa.  

%descrever o serviço de descoberta e exemplos
O SDR é responsável por prover acesso as instancias de ARs registradas. O SDR possui três tipos de descobertas: por referência, por nome e por tipo. As consultas por referências e nome podem ou não retornar uma instância única, estes dois tipos de buscas podem ser utilizados quando uma aplicação deseja saber se um AR específico está registrado. As consultas por tipo retornam todos os ARs contidos no subdiretório correspondente. Por exemplo, na Figura~\ref{fig:repositorio} o tipo ``Audiovisual'' contém três ARs, os quais são ``tvDaSala'', ``iPadQuarto'' e ``tabSala''. Logo, uma consulta neste caso retornaria uma lista contendo as referências para cada um dos três ARs.

%descrever o serviço de localização e exemplos
O SLR, além de prover acesso as instâncias de ARs físicas, permite obter os ARs mais próximos a um ponto específico do AmbI. A consulta por localização verifica os ARs indexados a um local especificado do Mapa. No exemplo da Figura~\ref{fig:repositorio}, uma consulta por ARs da sala retornaria a ``tvDaSala'' e o ``tabSala''. A consulta por proximidade leva em conta a subdivisão de espaços do ambiente. Então quando for consultado qual o AR mais próximo a ``tvDaSala'', mesmo que o ``iPadQuarto'' esteja mais próximo fisicamente, ``tabSala'' será o retornado como mais próximo. Isto ocorre porque os ARs do mesmo cômodo são verificados primeiro, depois são verificados ARs de cômodos vizinhos e assim por diante. Em exemplos de aplicações de notificação de mensagens esta lógica é favorecida, já que uma aplicação de lembrete de remédios vai querer notificar o paciente através do dispositivo visual mais proximamente visível, ou seja, de preferência no mesmo cômodo sem possíveis paredes atrapalhando.

\subsection{Comunicação} \label{subsec-comunicacao}

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/com/p_s.png}
  \caption{Esquema de \textit{publish-subscribe}}
  \label{fig:pubsub}
\end{figure}
%TODO: Essa figura está horrível!!!!!!!! Fazer outra!!!!!!!!!!!!!!!!!!

%descriçao do mecanismo p/s 
%A principal forma de comunicação no SmartAndroid é através de um mecanismo de publica-subscreve (\textit{publish-subscribe}), também chamado de comunicação por eventos. Este paradigma corresponde à uma comunicação assíncrona, que envolve o registro de interesse por parte da entidade interessada na entidade de interesse. As entidades são mapeadas no SmartAndroid em ARs, e uma entidade pode registrar seu interesse no contexto de uma outra qualquer, co-localizada ou remota. Conforme o contexto da entidade de interesse varia no tempo, esta notifica aos interessados, que desempenham suas ações relacionadas.

%contextualizaçao da comunicaçao no modelo de componentes distribuídos descriçao do mecanismo p/s 
Em relação a comunicação, foi definido um esquema de publicação e interesse por eventos para atender a um requisito essencial do \textit{framework}, a interpretação de contexto. Este esquema é denominado de \textit{publish-subscribe}, o qual muito utilizado em sistemas distribuídos. Este paradigma corresponde à uma comunicação assíncrona, que envolve por parte da entidade interessada no registro de interesse na variável do AR alvo. No esquema ilustrado na Figura~\ref{fig:pubsub}, os ARs 4, 5 e 6 se subscrevem a eventos que podem ser gerados pelos ARs 1, 2 e 3 respectivamente. Como auxilio a este esquema é utilizado conceitos de Programação Orientada a Aspectos (POA)~\cite{akait1997aop}, no qual é utilizado para definir pontos de aviso (\textit{advices}) para VCs alvos de interesse. Estes pontos de aviso indicam o disparo de uma notificação \textit{unicast} a todos os ARs interessados.

%descrição breve do mecanismo RPC para o SmartAndroid
Existe ainda possibilidade de comunicação direta com os ARs, o SDR pode ser utilizado para encontrar as referências de acesso direto a um em específico. Neste caso além de possuir a referência é necessário instanciar um \textit{proxy} correspondente a mesma classe do AR alvo. Com o \textit{proxy} instanciado, o mecanismo de RPC~\cite{birrell1984rpc} pode ser utilizado para fazer as invocações remotas das suas operações. A IPGAP utiliza a comunicação direta como meio para controlar remotamente os ARs visualizados no mapa.

%A abordagem adotada no SmartAndroid difere daquelas onde 
O \textit{framework} possui uma flexibilidade de comunicação que amplia o escopo de desenvolvimento de aplicações ubíquas, enquanto que muitas abordagens se restringem a comunicação baseada em eventos por ser mais econômica. A parte de comunicação do \textit{framework} necessita de uma infraestrutura básica de rede Wi-Fi, o que garante o mínimo de segurança contra acesso de agentes externos a rede do ambiente e agrega benefícios de mecanismos de criptografia como a WPA (sigla em inglês para Proteção de Acesso a Wi-Fi). 

\subsection{Modelo de Contexto} \label{subsec-contexto}
%falar que existem duas abordagens, e explica a abordagem centralizada
Uma infraestrutura para construção de aplicações sensíveis ao contexto (ou aplicações ubíquas) pode ter uma abordagem centralizada ou distribuída. Em abordagens centralizadas faz-se necessário a utilização de um serviço de gerenciamento de contexto, responsável por manter a informação contextual e oferecer interfaces para subscrições e consultas. Abordagens como esta correspondem à uma arquitetura do tipo \textit{blackboard} (ou quadro-negro), onde uma entidade envia uma mensagem para uma memória compartilhada entre todas as entidades, e também pode se subscrever para receber mensagens que respeitam algum padrão especificado~\cite{winograd2001architectures}. Todas as comunicações ocorrem através de um servidor centralizado e as mensagens são redirecionadas para os interessados.

%falar que adotou a abordagem distribuída, e explicá-la
Este trabalho adotou uma abordagem distribuída, onde a informação de contexto não é armazenada em um servidor centralizado, mas é mantida pelos ARs. O processo de aquisição do contexto envolve a descoberta do AR de interesse através do SDR, com a posterior subscrição do mesmo, como apresentado na Seção~\ref{subsec-comunicacao}. Assim sendo, a informação fica distribuída pelo ambiente e é informada aos interessados diretamente, enquanto na abordagem centralizada são utilizados dois pulos. Embora a informação esteja distribuída em diferentes dispositivos, possivelmente com diferentes sistemas, o \textit{framework} provê um nível de abstração tal que o acesso a qualquer informação é feito de maneira padronizada.

\subsubsection{Variáveis de Contexto e Operações} \label{subsubsec:cv}
%explicar vc
As informações de contexto respectivas de cada AR são expostas através de Variáveis de Contexto (VC). Se, por exemplo, há um agente para a televisão registrado no sistema, possivelmente ele provê VCs para qual a programação que está sendo exibida, qual a programação agendada, se a própria televisão está ligada, se está gravando alguma programação, enfim, tudo que diz respeito ao estado da televisão e é efetivamente coletado.
%TODO: repito a palavra ``abordagem'' várias vezes

%As VCs possibilitam que as informações de contexto sejam acessadas sem que haja um componente centralizado armazenando-as e disponibilizando-as, %como são as abordagens que utilizam tuple space (T Space, Google Interactive Space (acho q tb usa), outras) %TODO: Falar disso tudo

%explicar operações
O papel da Operações (OP) é expor as funcionalidades do AR, possibilitando às aplicações interagir ativamente no ambiente. Por exemplo, uma televisão integrada ao sistema pode oferecer OPs como para desligá-la, mudar de canal, gravar alguma programação, mostrar uma mensagem na tela, perguntar algo ao usuário, gerar um alerta, pausar a programação, etc.

A Figura~\ref{fig:inpt_cute} representa a subscrição às VCs ``Em uso'' do AR da cama e ``Ligado'' do AR do fogão. Na mesma figura pode-se observar a atuação no ambiente ao se utilizar as OPs ``Mostrar mensagem'' da televisão e ``Disparar'' do despertador. 

Tanto a VC como a OPs são interfaces, ou portas, do AR. Diferentes aplicações, instaladas no mesmo ambiente podem usar estas interfaces para interagir com o próprio ambiente. O SmartAndroid possui implementado uma estrutura de tipos que facilita a descoberta de ARs de interesse e possibilita o conhecimento de suas interfaces. Na implementação foi criado uma hierarquia de tipos com foco em \textit{smarthomes}, porém novos tipos podem ser criados.

As questões de segurança, inerentes ao problema, são resolvidas com duas técnicas: a própria segurança da rede e com a criação de domínios dentro de um ambiente. A segurança da rede (criptografia de pacotes em redes LAN, como WAP2 e WEP) evita que aplicações estrangeiras possam acessar os recursos de um ambiente. O domínio é uma abstração que provê restrições de acesso aos ARs que contém, o que impõe uma barreira para aplicações maliciosas, que devem requisitar permissão de acesso.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.8\textwidth]{imgs/interpretador-fogao-cute.png}
  \caption{Interpretador de Regra}
  \label{fig:inpt_cute}
\end{figure}

\subsubsection{Interpretação de Contexto} \label{subsubsec-ic}
%falar de maneira geral da interpretação de contexto, do IC e do atuador
A interpretação de contexto tem a função de agregar informações de contexto provenientes de diferentes fontes, considerando também a passagem de tempo, e avaliá-las segundo alguma lógica em específico. O suporte à interpretação de contexto pelo \textit{framework} possibilita uma separação de interesses, onde os desenvolvedores abstraem a implementação de regras de contexto e se mantém suas preocupações com a lógica da aplicação.

A intepretação do contexto é desempenhada por entidades chamadas \mbox{Interpretadores} de Contexto (IC), que avaliam essas informações e notificam agentes atuadores interessados. Agentes atuadores são quaisquer ARs que se subscrevem em ICs para desempenhar ações, sejam estas ações no nível de software (e.g., guardar no histórico, imprimir na tela, enviar para um servidor remoto) ou no nível do ambiente, ao se chamar OPs de outros ARs (e.g., mostrar uma mensagem na televisão, disparar o despertador, mudar a temperatura do ar-condicionado). 
%TODO: não sei se cito também a Figura~\ref{fig:arquitetura}, pq ja vou mostrar o interpretador em alto nivel na Figura~\ref{fig:inpt_cute}

%A interpretação de contexto possibilita que diversas informações de contexto, relacionadas através de uma expressão lógica, sejam manipuladas em uma entidade em separado, provendo separação de interesses. O interessado poderá referenciar apenas uma entidade, ao invés de várias, a fim de se obter a informação interpretada.

%falar do IC em funcionamento
Considere a seguinte regra: se uma pessoa (que mora sozinha) ligou o fogão, se deitou na cama, e passaram-se 15min, então dispare o alarme do dispertador e mostre na televisão a mensagem ``O fogão foi esquecido ligado!''. Este exemplo simplista poderia ser implementando no sistema como representado na Figura~\ref{fig:inpt_cute}. O IC recebe notificações da TV e do fogão com valores atualizados das VCs ``ligado'' e ``em uso'', respectivamente, e resolve internamente a temporização monitorada destas VCs. Uma vez que o IC avaliou a regra como verdadeira durante o tempo de 15min (previamente declarado), ele notifica o atuador ``Lembrar usuário''. O atuador, por sua vez, invoca as OPs ``Mostrar mensagem'' da TV e ``Disparar'' do despertador.

%falar sobre a arquitetura do IC e da sua criação
O IC é também um AR, e estende suas funcionalidades. A arquitetura do IC é composta de um módulo que recebe as notificações e atualiza os valores em cache; uma estrutura de dados em árvore que não só armazena as referências para as VCs e os valores atualizados, mas também a lógica da regra; um módulo que avalia a árvore à cada atualização de valores; e um módulo temporizador, controlado pelo módulo de avaliação.

%falar de temporização

%falar da GUI de composição de regras
A interpretação de contexto visa não só a construção de regras de contexto por parte das aplicações, mas também a definição das preferências dos usuários finais no sistema. Para isto, está sendo desenvolvida uma GUI que possibilite à usuários sem experiência técnica a criar, editar, desabilitar, etc, regras para o seu dia-a-dia. A GUI permitirá que, com poucos toques, um usuário possa selecionar ARs em um mapa da casa, escolher as VCs, comparar~\footnote{Possíveis comparações: $=, \neq, <, >, \leq$ e $\geq$} com valores ou outras VCs, e definir um conjunto de ações a serem desempenhadas no sistema. A definição do conjunto de ações pode ser feita tanto ao se escolher ARs atuadores para entrar em ação (e.g., Atuador Lembrar Usuário), como selecionando ARs no mapa e suas OPs em seguida (e.g., ar-condicionado - mudar temperatura - 20º). %TODO: devo referenciar o mapa que só vou falar mais adiante?

%%%%%%%%%%%%%%%%
%  AVALIACAO   %
%%%%%%%%%%%%%%%%
\section{Avaliação} \label{sec-av}
%falar sobre o SmartAndroid
Para consolidar a proposta do \textit{framework} foi desenvolvido um projeto para a plataforma \textit{Android}~\cite{saha2008android} denominado \textit{SmartAndroid}. Este projeto se beneficia da acessibilidade da tecnologia e de sua portabilidade a diversos tipos de dispositivos embarcados. Isto possibilita que o \textit{framework} seja mais abrangente e possibilite o desenvolvimento sistemas de aplicações ubíquas mais elaborados ao longo do tempo. 

%falar sobre o que foi desenvolvido para avaliar a qualidade do framework (jogo da velha e aplicação de economia de luz)
A qualidade do \textit{framework} foi avaliada em duas fases. Primeiro foi avaliado o fator de transparência de comunicação na construção de aplicações ubíquas. Esta avaliação ocorre através do processo de transformação de uma aplicação estritamente local \textit{Android} em uma aplicação ubíqua através do \textit{SmartAndroid}. Depois é avaliada a transparência no desenvolvimento de aplicações sensíveis ao contexto e manipulação das informações de contexto promovida pelo modelo de regras.

\subsection{Prova de Eficiência Conceitual}

\begin{figure}[ht]
  \centering
  \includegraphics[height=.8\textwidth]{imgs/app/tictactoe_br.PNG}
  \caption{Comparação entre os modelos das aplicações Android e SmartAndroid}
  \label{fig:tictactoe}
\end{figure}

%descrição da prova de conceito jogo da velha (figura tictactoe)
Para a primeira avaliação utilizou-se a aplicação do jogo da velha como base. Nesta aplicação em sua versão \textit{Android}, os jogadores interagem através de uma mesma tela de dispositivo (\textit{tablet} ou \textit{smartphone}). Na sua versão desenvolvida com o SmartAndroid os jogadores interagem sobre um mesmo tabuleiro em dispositivos diferentes. A Figura~\ref{fig:tictactoe} ilustra o modelo de aplicação das duas versões. A versão original possui o componente da GUI (GUI do Jogo da Velha), Motor do Jogo, a estrutura do Tabuleiro e a identidade dos Jogadores (Jogador) que pode ser do tipo ``X'' ou ``O'' (Tipo <X,O>). O Motor do Jogo atualiza o Tabuleiro, motor o qual atualiza periodicamente a GUI mostrando o novo estado da estrutura. O tipo do Jogador é verificado para indicar qual simbolo da jogada é marcado no tabuleiro (``X'' ou ``O''). 

%descrição do processo de transformação
Na versão \textit{SmartAndroid} é inserido um AR do jogo para interação remota (Agente do Jogo), o qual esta associado ao Motor de Jogo do dispositivo de um dos Jogadores (Jogador ``X''). O Agente do Jogo intercepta a indicação de jogada deste motor e encaminha para o Agente de Jogo do outro jogador (Jogador ``O''). Este AR do Jogador ``O'' atualiza o tabuleiro com a jogada do Jogador ``X'' (``atualiza'' do ``Game Agent''). Para evitar que um jogador jogue na vez do outro, por exemplo, que o Jogador ``X'' jogue no turno do Jogador ``O'', verifica-se o Tipo do Jogador da vez é o mesmo do que tenta a jogada ("verifica permissão"), tentativa que ocorre através de interação do usuário com a GUI. Na Figura~\ref{fig:tictactoe} as ligações unidirecionais em amarelo indicam as alterações realizadas no processo de transformação. A parte de inicialização do jogo foi modificada para registrar o AR do jogo e este registrar interesse em outros ARs que já registraram participação no mesmo jogo. Este registro ocorre para o recebimento da notificação de novos movimentos. Através do SDR é verificada a existência deste tipo de AR. Caso não haja 
nenhum então o AR passa a representar o Jogador ``X'', caso haja um apenas então o AR representa o Jogador ``O'', caso haja mais de um, o AR é apenas observador do jogo.

%avaliação jogo da velha
Foi observado que o uso de elementos do suporte como SDR e SRR e do esquema de \textit{publish-subscribe} facilitou o processo de transformação da aplicação. Na etapa de inicialização do jogo, o SRR foi utilizado para registrar o AR do jogo e o SDR foi utilizado para descobri-los e o esquema de \textit{publish-subscribe} foi utilizada para cada jogador registrar interesse nos movimentos do respectivo adversário. Após isso, a aplicação segue seu fluxo de execução padrão com o os procedimentos adicionais destacados em amarelo na Figura~\ref{fig:tictactoe}. Portanto, após a etapa de inicialização nenhuma alteração no nível de comunicação ou contexto foi necessária, todas as alterações posteriores ocorreram para promover a interação com o AR do jogo local ao dispositivo. Logo, podemos comprovar que o uso de AR tornou transparente a programação da aplicação ubíqua.

\subsection{Aplicação de Controle de Iluminação Residencial}
%descrição da prova de conceito desta implementação
Dentre os protótipos construídos como provas de conceito, a Aplicação de Controle de Iluminação Residencial (\textit{Smart Light Controller} -- SmartLiC) possibilita a experimentação dos serviços de registro, descoberta e localização dos recursos, assim como o uso da interpretação de contexto, da simulação de ARs, da IPGAP, dentre outros. 

%descrição da aplicação de economia de energia
O intuito do SmartLiC é promover economia no consumo de energia elétrica reduzindo gastos com iluminação. O sistema identifica através de sensores de proximidade a presença/ausência de pessoas no cômodo, conforme a pessoa sai de um cômodo e passam-se 30 segundos sem que ela volte, então a luz daquele cômodo é desligada. Em adição, foi implementado também que se é noite e uma pessoa entrou em um cômodo, então a lâmpada daquele cômodo deve ser ligada, com a opção também de bloquear esta função. 

%\begin{figure}[ht]
%   \centering
%   \includegraphics[height=.4\textwidth]{imgs/ipgap/app_controle_lamps.png}
%   \caption{Aplicação de Controle de Iluminação na IPGAP}
%   \label{fig:app_lamps}
%\end{figure}

%conclusão da avaliação
A execução do SmartLiC exige um tempo de resposta apurado. Com muitas instancias de lâmpadas este tempo pode aumentar, devido ao esquema de publicação por canais \textit{unicast} relativos a cada uma de suas respectivas ARs. Um problema que pode ser resolvido através de uma disseminação de eventos mais eficiente. Uma proposta estudada é a das Redes Endereçadas Por Interesses (REPI)~\cite{dutra2010repi}, na qual sua utilização permite que o interesse do AR em uma VC seja registrado localmente, as mensagens são identificadas com o interesse e apenas nós da rede que tenham o mesmo as manipulam. 


%%%%%%%%%%%%%%%%
% RELACIONADOS %
%%%%%%%%%%%%%%%%
\section{Trabalhos Relacionados} \label{sec-trab_rel}
%Diversos trabalhos vem sendo desenvolvidos nas áreas de Computação Ubíqua ou Pervasiva, Computação Sensível ao Contexto, 
Diversos trabalhos vem sendo desenvolvidos nas áreas de Computação Ubíqua e Computação Sensível ao Contexto aplicados a ambientes inteligentes. Alguns abordam a arquitetura do \textit{framework} \cite{helal2005gator} \cite{ranganathan2005olympus} e outros enfatizam aspectos de comunicação  \cite{villanueva2009framework} \cite{santi2011jaca}. 


%trabalhos relacionados a middlewares e frameworks
%\cite{helal2005gator}
Em \cite{helal2005gator} é proposta uma arquitetura de camadas. Dentre estas há a camada física com seus sensores, atuadores e outros dispositivos. Logo acima encontra-se a camada de plataforma de sensores onde ocorre a homogenização dos recursos físicos. A camada de serviços possui a representação dos recursos (serviços). Em analogia com nossa proposta, os serviços podem ser vistos como ARs, existem os mais básicos que representam diretamente os recursos e os mais complexos que é composto de vários serviços. As camadas de conhecimento e de contexto manipulam esta camada de serviços, a camada de conhecimento além de possuir elementos com funções similares ao do SGAR, na qual aplica um motor de raciocínio que permite avaliar se alguns serviços complexos estão disponíveis no ambiente. E a camada de contexto tem função similar ao nosso modelo de regras só que atuando em uma granularidade mais grossa. O gerenciamento destes serviços ocorre através dos elementos da camada de aplicações (aplicações ubíquas). A conclusão é que o nosso \textit{framework} possui uma estrutura semelhante, porém há neste trabalho uma série de mecanismos não considerados em \cite{helal2005gator} para a construção e instalação de novas aplicações. Além disso o \textit{framework} não se restringe a se aplicar apenas a um  ambiente do tipo \textit{smarthome}.

Em \cite{ranganathan2005olympus} é proposto um conjunto de operações de alto nível para ambientes inteligentes (espaços ativos). As operações básicas são semelhantes as funções de um sistema operacional, só que ao invés de manipular recursos deste tipo sistema, entidades do ambiente são manipuladas. Em nosso \textit{framework} há apenas funções de manipulação de base de dados (inserir, deletar, atualizar, consultar). As outras funções como parar, iniciar, suspender, reiniciar são definidas por cada AR e aplicação ubíqua do sistema, permitindo uma distribuição do controle de serviços do ambiente.

Boa parte dos \textit{frameworks} propostos relutam em levantar pontos sobre a sobrecarga de comunicação decorrente em sistemas ubíquos. O artigo \cite{villanueva2009framework} é uma proposta com abordagem distribuída para a parte de suporte (SGAR). O serviço de descoberta ocorre através de um protocolo de comunicação do tipo \textit{multicast}. O módulo de descoberta possui portas especializadas para escuta, busca e manipulação em cada componente do sistema. Em analogia com a nossa proposta de registro de recursos, pode ser estipulado registro local de recursos através da porta de escuta, tendo assim cada componente um repositório local de recursos. Porém o custo de espaço desta abordagem é muito alto devido a ocorrência de replicação de dados sobre o ambiente, e acaba ocasionando sobrecarga no consumo de energia devido a comunicação excessiva característica do padrão \textit{multicast}.

%\cite{santi2011jaca}
O JaCa-Android  \cite{santi2011jaca} utiliza o esquema de captura de mudança de estado em recursos através de escuta de eventos, o qual é semelhante ao \textit{publish-subscribe}, mas limitado a um mesmo dispositivo. O JaCa-Android é uma plataforma baseada em agentes para lidar com concorrência, eventos assíncronos, gerenciamento de recursos e sensibilidade ao contexto para possibilitar a construção de aplicações de manipulação de eventos. Para seu desenvolvimento são utilizadas as ferramentas de programação orientada a agentes. Além de não ser voltado a sistemas distribuídos, esta proposta tem sua abordagem limitada pela a plataforma \textit{Android} por utilizar mecanismos específicos da tecnologia para a captura de eventos. 

O \textit{framework} busca como diferencial que novas aplicações ubíquas possam ser concebidos  de forma dinâmica e adaptativa. A proposta permite ao desenvolvedor de aplicações um aparato ferramental para montar um AmbI personalizado. O desenvolvedor adquire como benefício a separação de interesses típico de uma programação orientada a aspectos (POA), tipo de programação que reduz a carga de codificação de requisitos essênciais de um sistema (e.g. segurança, manutenção). Ainda possui um suporte para construção de regras sobre contextos do ambiente, permitindo prover em alto nível serviços aos usuários do sistema inteligente. 
%essencialmente focamos em sistemas distribuídos, <não vamos falar dos sistemas 
%falar dos sistemas q tb tem uma arquitetura em camadas, mas nas diferenças entre o deles e o nosso


%~\cite{liu2003dios++}
%\cite{Chen2002} \cite{sudha2007ubiquitous} \cite{lee2012mobicon}


%%%%%%%%%%%%%
% CONCLUSÃO %
%%%%%%%%%%%%%
\section{Conclusão e Trabalhos Futuros} \label{sec-conclusao}

%Falar sobre o resultado do que foi visto
Este artigo apresentou o \textit{Framework} de Desenvolvimento de Aplicações Ubíquas em \mbox{Ambientes} Inteligentes, um arcabouço de funcionalidades conceituais que visam facilitar o desenvolvimento e a implantação de aplicações que interajam de forma ubíqua com o ambiente e seus ocupantes. O desenvolvedor, a partir do uso do modelo de componentes e o de contexto, cria serviços que atendam a requisitos preestabelecidos de acordo com as características de um AmbI. Após a concepção de serviços para a AmbI, a implantação ocorre a partir da instalação do conjunto de aplicações sobre uma infraestrutura de rede Wi-Fi segura. Os serviços, após implantados, podem ser manipulados pelos ocupantes através da IPGAP e das interfaces de operações de cada aplicação instalada. Incluem-se dentre estas manipulações, a instanciação das interpretadores de contexto e a manipulação direta dos ARs através dos serviços do SGAR. %TODO: (douglas) algo sobre infra deve ser dito em Comunicação
%TODO: pq falar arcabouço aqui, se usamos ``framework'' pelo artigo todo??? Uma coisa ou outra.

%Destacar pontos relevantes sobre o que foi conseguido
Com propósito de demonstrar e avaliar o \textit{framework}, foram apresentadas duas implementações de aplicações: o jogo-da-velha com múltiplos participantes, e a aplicação de controle de iluminação residencial. A primeira visa provar a eficiência de uso do modelo de componentes distribuídos através da transformação de uma aplicação local em uma aplicação ubíqua, a qual permite participantes de uma mesma partida em diferentes dispositivos. A segunda aplicação tenta explorar boa parte dos benefícios da proposta, como a criação de interpretadores de contexto e a utilização do serviço de localização, para controlar a iluminação da residência provendo conforto e economia de energia. Outras aplicações estão em desenvolvimento para ampliar o escopo de avaliação tais como um sistema de saúde residencial~\cite{carvalho2010sciads} e uma aplicação de visualização de vídeo (e.g., filmes, programas televisivos) que segue para a televisão do cômodo para onde o usuário se moveu.

%falar sobre os desafios do futuro
A proposta possui potencial para ampliar suas funcionalidades e atender a outros desafios importantes na área de computação ubíqua e computação sensível ao contexto. A segurança atual das interações promovidas pelas aplicações ubíquas estão limitadas as configurações da rede Wi-Fi, pretende-se evoluir para que este requisito seja refinado na camada do \textit{framework}, na qual restrições de acesso a determinados ocupantes e entre diferentes domínios de aplicações são pontos importantes da abordagem futura. Outro ponto está na economia de energia, boa parte dos dispositivo possuem fontes de energias restritas, então atender este requisito visa tanto aumentar seu tempo de vida como reduzir o gasto total do ambiente. Os gastos devido a comunicação são os mais preocupantes, logo pretende-se reduzir o tamanho das mensagens de eventos e invocações remotas, através de mecanismos de compressão de dados, e diminuir o número de notificações de eventos devido a mudanças de estados pouco significativas. Na parte de 
Computação Sensível ao Contexto, pretende-se identificar as preferências do usuário de forma menos intrusiva através de técnicas de mineração de dados aliadas a aprendizagem de máquina. Além disso, proporcionar ao usuário uma interface compreensível para definição de regras de contexto permitindo um controle facilitado e dinâmico dos serviços do AmbI.


%\cite{boulic:91}
%\nocite{abowd1999towards}
%\nocite{Brandle2007}
%\nocite{Cardoso2006}
%\nocite{Chen2002}
%\nocite{chen2010context}
%\nocite{Dey2001}
%\nocite{lee2012mobicon}
%\nocite{liu2003dios++}
%\nocite{sudha2007ubiquitous}
%\nocite{wang2005towards}


\bibliographystyle{sbc}
\bibliography{references}

\end{document}
