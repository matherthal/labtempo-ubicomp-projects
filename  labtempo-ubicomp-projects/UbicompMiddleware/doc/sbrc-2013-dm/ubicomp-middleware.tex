\documentclass[12pt]{article}

\usepackage{sbc-template}

\usepackage{graphicx,url}
\usepackage[space]{grffile}

\usepackage[brazil]{babel}   
\usepackage[latin1]{inputenc}  

\usepackage{listings}
\lstset{numbers=left,
stepnumber=1,
firstnumber=1,
numberstyle=\tiny,
extendedchars=true,
breaklines=true,
frame=tb,
basicstyle=\footnotesize,
stringstyle=\ttfamily,
showstringspaces=false
}
\renewcommand{\lstlistingname}{Código}
\renewcommand{\lstlistlistingname}{Lista de Listagens}

     
\sloppy

\title{Um \textit{Framework} de Desenvolvimento de Aplicações Ubíquas em Ambientes Inteligentes}
%acho q \\ pula linha
\author{Douglas Mareli\inst{1}, Matheus Erthal\inst{1}, David Barreto\inst{1}, Orlando Loques\inst{1}}


\address{Instituto de Computação -- Universidade Federal Fluminense (UFF)\\
  Niterói -- RJ -- Brasil
% \nextinstitute
%   Department of Computer Science -- University of Durham\\
%   Durham, U.K.
% \nextinstitute
%   Departamento de Sistemas e Computação\\
%   Universidade Regional de Blumenal (FURB) -- Blumenau, SC -- Brazil
  \email{\{merthal,dmareli,dbarreto,loques\}@ic.uff.br}
}

\begin{document} 

\maketitle

%%%%%%%%%%%%%%
%  RESUMOS   %
%%%%%%%%%%%%%%
\begin{abstract}
With recent advances in mobile computing and wireless communication technologies, we can see the emergence of a favorable construction of ubiquitous applications. This paper proposes a new framework for building such applications, providing a conceptual and implementation tools. We propose abstractions that allow developers to handle the resources distributed in the environment in a simple and homogeneous, and interpret the context information. In order to demonstrate the feasibility of the proposal, the concepts were implemented in a platform called SmartAndroid. This platform also includes an interface prototyping applications ubiquitous environments where settings can be tested before the acquisition of all devices, and interface composition of contextual rules, where end users can set preferences on the environment.
\end{abstract}


\begin{resumo} 
Com os recentes avanços da computação móvel e nas tecnologias de comunicação sem fio, percebe-se o surgimento de um cenário favorável à construção de aplicações ubíquas. Este trabalho propõe um novo \textit{framework} para a construção de tais aplicações, provendo um ferramental conceitual e de implementação. São propostas abstrações que possibilitam aos desenvolvedores lidar com os recursos distribuídos no ambiente de maneira simples e homogênea, e interpretar as informações de contexto. A fim de se demonstrar a viabilidade da proposta, os conceitos foram implementados em uma plataforma chamada \textit{SmartAndroid}. Sobre esta plataforma foi implementada uma interface de prototipagem de aplicações ubíquas onde configurações de ambientes podem ser testados antes da aquisição de todos os dispositivos; e uma interface de composição de regras de contexto, onde usuários finais podem definir suas preferências no ambiente.
\end{resumo}


%%%%%%%%%%%%%%
% INTRODUÇÃO %
%%%%%%%%%%%%%%
\section{Introdução}
%1 - (motivação: jogar pra cima ubicomp introduzindo a inteligência ambiental como aplicação funamental)
A Computação Ubíqua, como proposta por Weiser na década de 90~\cite{weiser1991computer}, descrevia uma mudança no paradigma de interação entre o usuário e os sistemas computacionais. Weiser previu o surgimento do que chamou de "computação calma", onde a interação entre os usuários e os computadores ocorre de forma natural, sem ações explicitas. Uma aplicação ubíqua identifica as necessidades do usuário obtendo informação de contexto através de sensores, e provê serviços através de atuadores. Este tipo de sistema de aplicações é associado a um espaço denominado ambiente inteligente (AmbI)~\cite{augusto2007ambient}. 
   
%2 - (as dificuldades, ?mas desenvolver é caro, difícil?, etc.)
A construção e manipulação de aplicações ubíquas representam um grande desafio para desenvolvedores com pouco conhecimento técnico e recursos escassos. Alguns problemas estão mais em evidência. Na construção e teste de aplicações surge a necessidade de um contingente de recursos como dispositivos embarcados e espaço físico. Também há uma dificuldade de estabelecer um protocolo comum de comunicação entre os componentes do sistema distribuído. E por fim, a interatividade das aplicações ubíquas é dificultada dependendo da quantidade e variedade de informações de contexto disponível no ambiente. Estes são alguns dos desafios que motivam a proposta de um \textit{framework} com o objetivo de facilitar a aplicação dos conceitos de computação ubíqua em ambientes inteligentes. %TODO: (matheus) Está meio confuso o meio deste parágrafo, depois a gente dá uma olhada

%3 - (o q os outros tem feito, falar rapidamente)
Muitos trabalhos tem por objetivo definir, no estado da arte, um arcabouço de técnicas para construção e gerenciamento de aplicações ubíquas~\cite{helal2005gator, cardoso2006, ranganathan2005olympus}. Em~\cite{augusto2007ambient} são apontados desafios na aquisição de conhecimentos do ambiente. Em~\cite{helal2005gator} é proposto um \textit{middleware} entre a camada física, a qual compreende os sensores e atuadores, e a camada de aplicação, na qual se encontram o ambiente de desenvolvimento e as aplicações ubíquas. Em~\cite{cardoso2006} são propostos serviços para gerenciar componentes representativos do ambiente no nível de \textit{middleware}. Uma variedade de dispositivos e propriedades é encontrada no AmbI. Como exemplo há a casa inteligente, onde televisores, termômetros, smartphones, etc. podem ser encontrados inseridos em cômodos com suas especificidades, as quais compõem as propriedades deste ambiente. Preocupado em organizar estes componentes, o trabalho em \cite{ranganathan2005olympus} propõe uma estrutura de representação da camada física em hierarquia de tipos através de ontologia. Esta estruturação permite ampliar o escopo de operações de suporte de um sistema ubíquo.

%4 - (?Este trabalho... vamos propor um protótipo ...?, nosso trabalho tem q ganhar. ?Tem que caber o smartandroid inteiro? - ARs)
Neste trabalho é proposto um \textit{framework} de desenvolvimento de aplicações ubíquas em AmbI. O objetivo é dar suporte a programação, teste e execução de aplicações permitindo lidar de forma consistente com sistemas de grande complexidade. Este \textit{framework} destaca-se por cobrir grande parte dos desafios destacados na computação ubíqua~\cite{araujo2003}, como o tratamento da heterogeneidade de dispositivos, o tratamento de informações de contexto e a descoberta de serviços. A heterogeneidade é tratada através da definição de um Modelo de Componentes Distribuídos, no qual o componente básico tem uma estrutura uniforme definida como um Agente de Recurso (AR). Segundo~\cite{cardoso2006}, AR é a entidade de coleta de informações de contexto. Neste trabalho, esta definição é ampliada para qualquer módulo que interage com elementos deste modelo de componentes. Para o tratamento de informações de contexto é proposto o Modelo de Contexto que consiste de um conjunto de interpretadores de contexto. Além disso, no \textit{framework} é proposta a aplicação de Interface de Prototipagem e Gerenciamento de Aplicações Pervasivas (IPGAP) (Trabalho submetido ao SBRC 2013) que permite a visualização e o teste de aplicações ubíquas, as quais mesclam componentes reais e virtuais. %TODO: (matheus) nós vamos citar a comutação ubíqua com letras maiúsculas ou minúsculas? Temos q decidir de pronto.
%TODO: (matheus) Douglas, nós não vamos citar o david e a ipgap dessa maneira aí. Nós temos que falar que essa parte tb foi submetida para o SBRC 2013

%5 - falar do smartandroid usado na avaliação(mostrar uma prova de conceito: 1 (exatamente) aplicação, seja a de saúde, ou outra)
Os conceitos do \textit{framework} foi efetivado sobre a plataforma Android através do projeto SmartAndroid (www.tempo.uff.br/smartandroid). Neste projeto foi possível avaliar a qualidade de suporte do \textit{framework}. Esta avaliação ocorreu durante o processo de transformação de uma aplicação com funcionamento estritamente local em uma aplicação ubíqua. Com isso foi possível provar conceitualmente que o \textit{framework} facilita o processo de construção de aplicações ubíquas. Outra avaliação foi realizada para testar a eficiência do Modelo de Contexto, foi então construída uma aplicação que explora os mecanismos de comunicação utilizados no modelo de componentes distribuídos e utiliza as informações básicas de um AR, como localização e identificação de tipo.

%6 - (resumo das seções, falar das próximas seções)
O restante deste artigo é organizado da seguinte forma: a Seção 2 apresenta os conceitos básicos utilizados ao longo do texto. A Seção 3 apresenta a arquitetura geral do \textit{framework} incluindo o Modelo de Componentes Distribuídos e o Modelo de Contexto. Na Seção 4 é apresentada uma prova de conceito demonstrando a eficiência do \textit{framework} em construir aplicações ubíquas e demonstrada uma aplicação que explora, através da implantação em uma \textit{smarthome}, as principais características do AmbI. Após a avaliação, a Seção 5 apresenta uma comparação com trabalhos relacionados. E para finalizar, a Seção 6 apresenta as conclusões e trabalhos futuros.



%%%%%%%%%%%%%%%%
%    BASICO    %
%%%%%%%%%%%%%%%%
\section{Conceitos Básicos}

%7 - [(introduzir e motivar os conceitos abordados por nossa proposta)
Os \textit{frameworks} para aplicações ubíquas costumam utilizar como base os conceitos de Inteligencia Ambiental~\cite{augusto2007ambient}, de Computação Sensível ao Contexto~\cite{Dey2001} e de Prototipagem de Aplicações Ubíquas~\cite{weis2007prototyping}. A Inteligencia Ambiental define o espaço onde estas aplicações funcionam. Os comportamentos de sistemas ubíquos são definidos a partir de técnicas aplicadas na Computação Sensível ao Contexto. E a prototipagem é utilizada para manipular e testar o funcionamento do conjunto de aplicações no ambiente.
  
%8 - (ambientes inteligentes)
A Computação Ubíqua se inclui dentre as inúmeras áreas abrangidas pela Inteligência Ambiental. Sistemas com enfoque nesta área geralmente possuem uma arquitetura em camadas como base. Na camada mais profunda encontra-se o espaço com seus ocupantes, em uma camada acima estão os sensores captando suas interações e atuadores promovendo ações com estes indivíduos. Uma camada intermediária (\textit{middleware}) é definida entre as tomadas de decisões e as interações com o ambiente. As decisões podem ser tomadas por um ocupante ou através de mecanismos de inteligencia artificial. Além do \textit{middleware} como suporte a serviços, nosso \textit{framework} inclui um modelo de componentes, conceitos e mecanismos de comunicação, e um modelo e mecanismos de contexto. 

%9 - smarthome como um tipo de ambiente inteligente
Um AmbI é o meio onde se agrega inteligencia computacional. Há diversos exemplos na literatura que utilizam especificações deste tipo de ambiente, dentre eles o termo ``smarthome'' (casa inteligente) se mostra como um dos mais populares. Há diversas propostas no estado da arte explorando este tipo de espaço~\cite{helal2005gator,augusto2007ambient,ranganathan2005olympus}. Estes trabalhos costumam explorar a heterogeneidade de dispositivos e as rotinas de seus ocupantes tendo a casa inteligente como cenário. Apesar do \textit{framework} proposto neste trabalho abranger qualquer tipo de AmbI, boa parte dos exemplos de aplicações focam um ambiente residencial típico de modo a facilitar sua apresentação.
 
%10 - (modelo de componentes distrbuídos(agente de recurso como definição de componente básico))]
Para que as aplicações ubíquas possam ser integradas a elementos de baixo nível do AmbI é necessário que este espaço seja representado no nível de \textit{middleware}. Este trabalho define um modelo de componentes arquiteturais distribuídos \cite{brown1998dcom} para representar de forma geral sistemas construídos pelo nosso \textit{framework}. Utilizando-se dos benefícios deste modelos são apresentados os conceitos da aplicação de prototipagem para teste do AmbI (Seção~\ref{subsec-ipgap}), e o Modelo de Contexto (Seção~\ref{subsec-aware}). Na Seção~\ref{subsec-comunicacao} são apresentados os mecanismos de comunicação utilizados como suporte na interação entre os componentes do modelo distribuído. 

\subsection{Prototipagem de Aplicações Pervasivas} \label{subsec-ipgap}
%11 - falar sobre trabalho do david e da importancia de testar apicaçoes ubíquas
No contexto do \textit{framework}, a prototipagem de aplicações pervasivas é fundamental para a depuração e teste em um AmbI. Num desenvolvimento paralelo, a IPGAP é proposta como um aparato ferramental que permite ao desenvolvedor de aplicações ter acesso a estes benefícios. Além disso, a IPGAP possui uma  Interface Gráfica de Usuário (\textit{Graphic User Interface} -- GUI) que proporciona ao usuário final controlar remotamente recursos do ambiente.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.8\textwidth]{imgs/ipgap/ipgap.PNG}
  \caption{Interface de Prototipagem}
  \label{fig:ipgap}
\end{figure}

%12 - detalhar elementos da IPGAP
Boa parte das capacidades da IPGAP são proporcionadas pelas seguintes funcionalidades: mapeamento do ambiente, instalação de novas aplicações ubíquas e ligação com aplicações já existentes. Através destas funcionalidades é possível ter um ambiente preenchido de recursos simulados (como televisor virtual, geladeira virtual, etc.) e fazê-los executar junto a recursos reais que podem ser representados em sua GUI. A GUI da \mbox{IPGAP} foi elaborada apropriadamente para o universo dos  \textit{tablets} e \textit{smartphones}, nela podendo ser visualizados os recursos reais e virtuais localizados no mapa, como ilustrado na Figura~\ref{fig:ipgap}.     

%13 - demonstrar uso em nossa proposta com exemplo (vide figura)
Na Figura~\ref{fig:ipgap} é ilustrado um \textit{tablet} executando o aplicativo da IPGAP e \textit{smartphones} simulando recursos como TV, lampada e termômetro. Através da IPGAP é possível visualizar e instanciar cada um desses elementos e representá-los no mapa. Repare que na figura há outros recursos além dos representados pelos \textit{smartphones}, estes são recursos criados na própria IPGAP. Com isso o desenvolvedor de aplicações não fica limitado pela disponibilidade de recursos físicos podendo simular os elementos indisponíveis.

%14 - (descrever sua utilização na proposta)
O \textit{framework} proposto permite ao desenvolvedor criar aplicações nas dimensões e quantidade que desejar para um ambiente real. A IPGAP permite verificar a viabilidade do funcionamento das aplicações desenvolvidas em ambiente próximo ao real. As restrições deste AmbI real são semelhantes as que ocorrem no AmbI simulado na IPGAP. Isto permite avaliar o desempenho antes da implantação efetiva das aplicações.

\subsection{Computação Sensível ao Contexto} \label{subsec-aware}
%15 - introduzir o conceito de contexto
O contexto exerce um papel de fundamental importância na computação ubíqua. Durante a década de 90, diversos autores procuraram definir contexto, muitas delas pouco apuradas. Baseados em definições de autores anteriores, Dey e Abowd~\cite{Dey2001} compuseram a seguinte definição para contexto:

\begin{quotation}
  ``Qualquer informação que pode ser usada para caracterizar a situação de entidades (i.e., pessoa, lugar ou objeto) que são consideradas relevantes para a interação entre um usuário e uma aplicação, incluindo o próprio usuário e aplicação. Contexto é tipicamente a localização, identidade, e estado de pessoas, grupos, e objetos computacionais e físicos''
\end{quotation}

%16 - definição detalhada de contexto
Segundo~\cite{Dey2001} três entidades de contexto foram identificadas como de maior importância, são elas: lugares, pessoas e coisas. No AmbI, ``Lugares'' são os cômodos, os andares de uma edificação, ou espaços em geral; ``Pessoas'' são indivíduos que povoam o ambiente e interagem com o mesmo; e ``Coisas'' são representações virtuais de objetos físicos ou componentes de \textit{software}.

%17 - elementos de contexto
Após a identificação das entidades, são introduzidas quatro categorias de contexto essenciais: identidade, localização, estado e tempo. ``Identidade'' corresponde à identificação única de uma entidade. ``Localização'' não só diz respeito à posição de uma pessoa e sua inserção em uma área ou subárea, mas diz também respeito à proximidade de uma pessoa em relação à outra, ou à uma coisa. ``Estado'' identifica características intrínsecas da entidade (e.g., temperatura de uma sala, sinal vital de uma pessoa). ``Tempo'' é uma informação de contexto quando ajuda a caracterizar a situação, geralmente usado com outras informações de contexto, indicando um instante ou período durante o qual alguma informação contextual é conhecida ou relevante.

%18 - descrever sobre importancia para ambientes inteligentes (áreas relacionadas e aplicações)
Uma meta da aquisição de contexto é determinar o que o usuário está tentando realizar, por exemplo, se uma pessoa sai de casa e deixa a torneira aberta, pode ser que este a tenha esquecido. A aquisição do contexto de forma automatizada contribui para a construção de aplicações para ambientes inteligentes que, de outra maneira, seriam inviáveis, por exigir a entrada de dados ou comandos diretamente por parte dos usuários.

%19 - descrever importancia em nossa proposta   
O \textit{framework} proposto neste trabalho oferece uma maneira de se representar os recursos espalhados pelo ambiente e os recursos no nível simulado de software (vide Seção~\ref{sec-framework}), tornando homogênea a comunicação entre os componentes, de tal maneira que é simples se declarar e consultar as informações de contexto. Através de serviços padronizados é possível se encontrar as entidades e obter seu contexto, onde esta pesquisa pode ser feita tanto utilizando a identificação da entidade, como o seu tipo ou localização física. A sensibilidade ao contexto é caracterizada pela reação do sistema aos eventos de mudança do contexto, portanto, o \textit{framework} introduz o Interpretador de Contexto (vide Seção~\ref{subsubsec-ic}).
%TODO: terminar de escrever este paragrafo!

%deslocar para cá a seção de comunicação
\subsection{Comunicação} \label{subsec-comunicacao}
%passar para conceitos básicos

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/com/publish-subscribe.png}
  \caption{Esquema de \textit{publish-subscribe}}
  \label{fig:pubsub}
\end{figure}

%descriçao do mecanismo p/s 
%A principal forma de comunicação no SmartAndroid é através de um mecanismo de publica-subscreve (\textit{publish-subscribe}), também chamado de comunicação por eventos. Este paradigma corresponde à uma comunicação assíncrona, que envolve o registro de interesse por parte da entidade interessada na entidade de interesse. As entidades são mapeadas no SmartAndroid em ARs, e uma entidade pode registrar seu interesse no contexto de uma outra qualquer, co-localizada ou remota. Conforme o contexto da entidade de interesse varia no tempo, esta notifica aos interessados, que desempenham suas ações relacionadas.

%37 - contextualizaçao da comunicaçao no modelo de componentes distribuídos descriçao do mecanismo p/s
Os modelos de Componentes Distribuídos e de Contexto necessitam do suporte de mecanismos de comunicação para efetivar as interações entre os elementos do AmbI. Foram desenvolvidos dois mecanismos: a invocação remota de procedimentos (\textit{Remote Procedure Call} - RPC) e a publicação de eventos por interesse através do paradigma \textit{publish-subscribe}~\cite{pubsub2012wiki}. 

%38 - descrição breve do mecanismo RPC para o SmartAndroid
O mecanismo de RPC é utilizado para estabelecer a comunicação síncrona direta entre os componentes do AmbI. Este mecanismo possibilita que uma entidade controle e obtenha o estado remotamente de outra. A entidade invocadora utiliza um \textit{proxy} da entidade invocada, nele está contida a sua interface de chamadas de procedimentos públicos. A chamada e o retorno do procedimento são enviados através de mensagens serializadas na notação JSON (JavaScript Object Notation)~\cite{json2012}. Este mecanismo é utilizado pela IPGAP para controlar remotamente os componentes do AmbI.

%37 - do mecanismo p/s 
O paradigma de \textit{publish-subscribe} corresponde à uma comunicação assíncrona que envolve, por parte da entidade interessada, o registro de interesse em eventos da entidade alvo. A Figura~\ref{fig:pubsub} ilustra os passos de subscrição e publicação de eventos no contexto de AmbI. Em um primeiro momento os Componentes A e B se subscrevem ao Evento 1 do Componente C (Passo 1) e esta subscrição é armazenada no campo de Interessados. Em algum momento posterior o Componente D ativa o evento subscrito (Passo 2). Há a interceptação desta ativação (Passo 3) e os Componentes A e B, com interesse neste evento (Passo 4), são notificadas sobre a sua ocorrência (Passo 5). Este esquema é utilizado no Modelo de Contexto para aquisição de mudança de estado (vide Seção~\ref{subsec-contexto}).

%39 - A abordagem adotada no SmartAndroid difere daquelas onde 
Enquanto outras abordagens se restringem a comunicação baseada em eventos por ser mais econômica, o \textit{framework} se beneficia do mecanismo de comunicação direta. O uso de diferentes mecanismos amplia o escopo de desenvolvimento de aplicações ubíquas. Como suporte, a comunicação no \textit{framework} necessita de uma infraestrutura básica de rede Wi-Fi, o que garante o mínimo de segurança contra acesso de agentes externos a rede do ambiente e agrega benefícios de mecanismos de criptografia como a Proteção de Acesso a Wi-Fi (Wi-Fi Protected Access - WPA). 

%%%%%%%%%%%%%%%%
%  FRAMEWORK   %
%%%%%%%%%%%%%%%%
\section{Descrição do \textit{Framework}} \label{sec-framework}

%20 - definição geral do framework - 21 - definiçao de uso geral da AR
O \textit{framework} provê facilidades e padrões de programação a aplicações sensíveis ao contexto focadas em AmbI (incluindo \textit{smarthomes}). Dentre as facilidades está a capacidade de tornar transparente as partes da aplicação que envolvem a comunicação, a aquisição de contexto e a localização de recursos no ambiente. Como abstração aos recursos, são utilizados componentes chamados Agentes de Recursos (AR). O AR é a unidade básica de modularização do ambiente distribuído proposto pelo \textit{framework}, assim sendo, o mesmo pode também ser utilizado na modelagem das aplicações. Se uma aplicação necessita de uma entidade distribuída, pode representá-la através de um AR, por exemplo: sensores de temperatura da casa; sensores de vazamento de gás na cozinha; um medidor de pressão arterial; um atuador para fechar as janelas; etc. 

%falar sobre smartandroid
Para consolidar a proposta do \textit{framework} foi implementado o projeto para a plataforma \textit{Android}~\cite{saha2008android} denominado \textit{SmartAndroid}. Este projeto se beneficia da acessibilidade da tecnologia e de sua portabilidade a diversos tipos de dispositivos embarcados. Isto possibilita que o \textit{framework} seja mais abrangente e possibilite o desenvolvimento sistemas de aplicações ubíquas mais elaborados ao longo do tempo. 

%23 - introduzindo o Modelo de Componentes Distribuídos e o Modelo de Contexto

A arquitetura do \textit{framework} é definida a partir do Modelo de Componentes Distribuídos (Seção~\ref{subsec-mcd}) e do Modelo de Contexto (Seção~\ref{subsec-contexto}). O primeiro apresenta a estrutura do AR e o Suporte ao Gerenciamento de Agentes de Recursos (SGAR). E o segundo apresenta os elementos e Interpretadores de Contexto.

%Para possibilitar a comunicação entre os diferentes ARs, o SmartAndroid dispõe de um serviço que gerencia estes recursos, e mantém informações de identificação e localização dos mesmos, dentre outras. Este serviço chama-se Serviço de Gerenciamento de Agentes de Recursos (SGAR) e encontra-se centralizado no ambiente distribuído. Como apresentado na Figura~\ref{fig:suporte}, o SGAR é composto por três componentes, ou serviços: o Serviço de Registro de Recurso (SRR), o Serviço de Descoberta de Recursos (SDR) e o Serviço de Localização de Recursos (SLR). A diferença entre o SDR e o SLR está no fato de que o primeiro se refere à localização na rede de computadores, e o segundo se refere à localização física do dispositivo no ambiente. %TODO: antes de falar isso, enfatizar um pouco o problema da localização

%24 - objetivo do SGAR (talvesz remover daqui para evitar repretição em demasia)
%O SGAR tem por objetivo aumentar a visibilidade das informações de contexto dos ARs e tornar a comunicação transparente para o programador das aplicações. A instalação e desinstalação de aplicações ubíquas são viabilizadas pelo SRR. O reconhecimento dos ARs por outras aplicações é possibilitado pelo SDR. E as localizações de ARs de elementos físicos do AmbI podem ser consultadas através da SLR. 
%TODO: talvez possamos falar aqui mesmo que aplicações poderiam ser instaladas no ambiente e inclusive compartilhar informações

% \begin{figure}[ht]
%   \centering
%   \includegraphics[width=.7\textwidth]{imgs/arq-camadas-interpretador.png}
%   \caption{Camada de Interpretação de Regra}
%   \label{fig:cmd-intp}
% \end{figure}

\subsection{Modelo de Componentes Distribuídos} \label{subsec-mcd}
%falar sobre interfaces de serviços do AR e os serviços de descoberta, registro e localização

%25 - descrever de forma geral o componente distribuido - 27 - descrever a estrutura do agente
Como visto anteriormente, sistemas para AmbI são geralmente estruturados nas camadas física, de \textit{middleware} e de aplicação. O Modelo de Componentes Distribuídos segue esta estrutura para mapear as aplicações ubíquas no AmbI. O AR foi definido para padronizar os componentes de interação do ambiente, e dessa forma resolver questão da heterogeneidade de recursos. A sua estrutura geral, como ilustrada na Figura~\ref{fig:agente}, é composta por nome único (``tvFamília''), hierarquia de tipos (``$\backslash$Visual$\backslash$TV''), localização (``Sala''), classe (classe TV) com variáveis e métodos e uma lista de interessados em informações de contexto. A hierarquia de tipos, que é composta por uma sequencia de classes, foi inspirada na ontologia utilizada em \cite{ranganathan2005olympus} para classificar entidades (como os ARs). Esta hierarquia foi organizada para possibilitar a consulta e instanciação de ARs a partir de propriedades associadas a uma classe específica. Na Seção~\ref{subsubsec-sgar} são apresentados serviços que se beneficiam desta estrutura do AR.

\begin{figure}[ht]
  \centering
  \includegraphics[height=.4\textwidth]{imgs/suporte/instanciaAR.PNG}
  \caption{Instância do Agente de Recurso}
  \label{fig:agente}
\end{figure}

%30 - descrever as portas de interação (VC e operações) do AR 
A lista de interessados do AR é utilizado pelo Modelo de Contexto (Seção~\ref{subsec-contexto}) para notificar outras instancias sobre sua mudança de estados. Um AR armazena o seu estado por meio de seus atributos declarados e os expõe através da criação de Variáveis de Contexto (VC), como será visto na Seção~\ref{subsubsec:cv}. Geralmente as mudanças nas VCs são provocadas por Operações (OP), como será estudado na mesma seção. Do ponto de vista da arquitetura, as VCs são as portas de saída de informação, e as OPs são as portas de entrada de comando.


%26 - descrever um exemplo de modelo de componente distribuído (figura arqGeral)
Na Figura~\ref{fig:arquitetura} são apresentados componentes de uma \textit{smart home}. Na camada de recursos estão componentes físicos ou conceituais. Os recursos conceituais são aqueles simulados através de outro tipo de dispositivos (como \textit{smartphones} e \textit{tablets}) ou criados através da IPGAP. A figura apresenta como recursos exemplo um televisor, uma cama e um fogão. No \mbox{\textit{middleware}} são apresentados os seus ARs representativos, além do AR de interpretação de contexto para verificar se o fogão foi esquecido ligado por um ocupante da casa. Este interpretador verifica se alguém está presente na cama e por quanto tempo o fogão está ligado, se um tempo limite for ultrapassado uma ação é disparada para que o fogão seja desligado. Os ARs referentes a cama e ao fogão coletam os dados destes recursos físicos e os representam na camada do \mbox{\textit{middleware}}, isto permite que estas informações sejam utilizadas pelos componentes da camada da aplicação. As aplicações utilizam o SGAR (Seção~\ref{subsubsec-sgar}) para criar, consultar e instanciar ARs no \textit{middleware}. 

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/framework/arquiteturaGeral.PNG}
  \caption{Arquitetura do \textit{Framework}}
  \label{fig:arquitetura}
\end{figure}




%Como pode-se ver na figura, as informações de contexto são armazenadas em variáveis e as funcionalidades de que o recurso dispõe são 
%As variáveis, como representado na Figura~\ref{fig:agente} armazenam o estado do AR, e os métodos do exemplo possibilitam acessar as funcionalidades dos ARs, ou Operações. Através desses recursos, um AR pode expor o acesso à sua informação de contexto através da criação de Variáveis de Contexto
%Em tempo de programação, pode-se declarar quais são 

\subsubsection{Suporte ao Gerenciamento de Recursos} \label{subsubsec-sgar}

%31 - falar sobre uso geral do SGAR (figura Suporte)
O SGAR é o responsável por gerenciar o conjunto de ARs no AmbI. O controle de registro e descoberta de ARs segue a ideia geral sobre serviços que manipulam recursos apresentada em \cite{cardoso2006}. Neste trabalho, o SGAR é composto por três componentes, ou serviços: o Serviço de Registro de Recurso (SRR), o Serviço de Descoberta de Recursos (SDR) e o Serviço de Localização de Recursos (SLR). A Figura~\ref{fig:suporte} ilustra as principais operações de cada serviço de suporte. O SRR é utilizado para registrar ou remover ARs no ambiente, o SDR verifica suas existências ("Busca") e o SLR verifica suas posições físicas ("Localiza"). Estas operações manipulam dados representativos dos respectivos ARs no Repositório de Recursos.  

\begin{figure}[ht]
  \centering
  \includegraphics[width=.7\textwidth]{imgs/suporte/suporte.PNG}
  \caption{Serviços de Suporte}
  \label{fig:suporte}
\end{figure}

%32 - descrever estrutura de repositorio 
O Repositório de Recursos, como apresentado na Figura~\ref{fig:repositorio}, possui o Diretório de Recursos e o Mapa, o qual contém representado o conjunto de espaços físicos do AmbI. O Diretório contém os dados dos ARs armazenados conforme o tipo de cada um, no caso da figura há o tipo TV com a "tvDaSala" e o tipo \textit{tablet} com o "iPadQuarto" e o "tabSala". Os dados consistem do nome, tipo, localização e a referência de acesso. A referência de acesso permite a interação de ARs através do RPC (Seção~\ref{subsec-comunicacao}). Cada espaço do Mapa possui uma área e um nome. No caso de uma \textit{smart home} os cômodos da casa representam estes espaços. Cada entrada do Mapa referencia um conjunto de AR contidos no respectivo espaço.

\begin{figure}[ht]
  \centering
  \includegraphics[height=.6\textwidth]{imgs/suporte/repositorio.png}
  \caption{Repositório de Recursos}
  \label{fig:repositorio}
\end{figure}

%apresentar a API (estilo olympus)
A Tabela~\ref{tab:api} contém um resumo sobre as operações suportadas pelo SGAR através dos serviços (SDR, SRR SLR) e da estrutura básica do AR que tornam transparente as dificuldades básicas de manipular componentes distribuídos. Além das operações básicas ilustradas na Figura~\ref{fig:suporte} de registro (``register'') e remoção no SRR (``unregister''), busca no SDR (``search'') e localização no SLR, são apresentadas as funções ``searchByProximity'' no SLR, e ``subscribe'' e ``publish'', estas as quais são comuns a todo AR. As operações básicas do AR são possibilitadas pelo mecanismo de comunicação por eventos descrito na Seção~\ref{subsec-comunicacao}. A operação ``subscribe'' é responsável por adicionar entradas a lista de interessados, como no exemplo ilustrado na Figura~\ref{fig:agente} em que celular (AR referenciado) tem interesse no VC de canal da TV. A operação ``publish'' é executada quando há mudança em no valor de algum VC do AR, a operação envia o valor para os interessados associados. A operação ``searchByProximity'' retorna, através de distancia euclidiana entre pontos, quais ARs estão mais próximos da coordenada passada no seu argumento. Esta função pode ser utilizada quando se quer mandar uma mensagem para o dispositivo visual mais próximo de uma pessoa. O uso das Operações ``publish'' e ``subscribe'' é explorado pelos Interpretadores de Contexto apresentados na Seção~\ref{subsubsec-ic}.

%((((((((((((((((((((((((((((tabela 1))))))))))))))))))))))))))))))
\begin{table} % aqui começa o ambiente tabela
\centering
\caption{Operações do SGAR} % igual ao ambiente figura
\begin{tabular}{|c|c|p{2.2cm}|p{6.5cm}|} 
\hline % este comando coloca uma linha na tabela
Serviço & Operação & Argumentos & Descrição\\ 
\hline
SRR & register & Dados do AR & Adiciona os dados do AR no Diretório de Recursos e Indexa ao espaço correspondente no Mapa  \\ \hline
SRR & unregister & Nome ou Referência de AR & Remove os dados do AR do Repositório de Recursos  \\ \hline
SDR & search & Atributo e Consulta & Busca ARs no Repositório que atendam a Consulta no Atributo especificado. Atributo pode ser tipo, local, nome ou referência   \\ \hline
SLR & searchByProximity & Posição & Retorna uma lista de ARs ordenada por proximidade física \\ \hline
AR & subscribe & Referência de AR e VC & Adiciona argumentos a lista de interessados do AR corrente \\ \hline
AR & publish & VC e Valor & Notifica ARs associados a VC na lista de interessados do AR corrente \\ \hline
\end{tabular}
\label{tab:api}
\end{table}

\subsection{Modelo de Contexto} \label{subsec-contexto}
%falar que existem duas abordagens, e explica a abordagem centralizada
Uma infraestrutura para construção de aplicações sensíveis ao contexto (ou aplicações ubíquas) pode ter uma abordagem centralizada ou distribuída. Em abordagens centralizadas faz-se necessário a utilização de um serviço de gerenciamento de contexto, responsável por manter a informação contextual e oferecer interfaces para subscrições e consultas. Abordagens como esta correspondem à uma arquitetura do tipo \textit{blackboard} (ou quadro-negro), onde uma entidade envia uma mensagem para uma memória compartilhada entre todas as entidades, e também pode se subscrever para receber mensagens que respeitam algum padrão especificado~\cite{winograd2001architectures}. Todas as comunicações ocorrem através de um servidor centralizado e as mensagens são redirecionadas para os interessados.

%falar que adotou a abordagem distribuída, e explicá-la
Este trabalho adotou uma abordagem distribuída, onde a informação de contexto não é armazenada em um servidor centralizado, mas é mantida pelos ARs. O processo de aquisição do contexto envolve a descoberta do AR de interesse através do SDR, com a posterior subscrição do mesmo, como apresentado na Seção~\ref{subsec-comunicacao}. Assim sendo, a informação fica distribuída pelo ambiente e é informada aos interessados diretamente, enquanto na abordagem centralizada são utilizados dois pulos. Embora a informação esteja distribuída em diferentes dispositivos, possivelmente com diferentes sistemas, o \textit{framework} provê um nível de abstração tal que o acesso a qualquer informação é feito de maneira padronizada.

\subsubsection{Variáveis de Contexto e Operações} \label{subsubsec:cv}
%explicar vc
As informações de contexto respectivas de cada AR são expostas através de Variáveis de Contexto (VC). Se, por exemplo, há um agente para a televisão registrado no sistema, possivelmente ele provê VCs para qual a programação que está sendo exibida, qual a programação agendada, se a própria televisão está ligada, se está gravando alguma programação, enfim, tudo que diz respeito ao estado da televisão e é efetivamente coletado.
%TODO: repito a palavra ``abordagem'' várias vezes

%As VCs possibilitam que as informações de contexto sejam acessadas sem que haja um componente centralizado armazenando-as e disponibilizando-as, %como são as abordagens que utilizam tuple space (T Space, Google Interactive Space (acho q tb usa), outras) %TODO: Falar disso tudo

%explicar operações
O papel da Operações (OP) é expor as funcionalidades do AR, possibilitando às aplicações interagir ativamente no ambiente. Por exemplo, uma televisão integrada ao sistema pode oferecer OPs como para desligá-la, mudar de canal, gravar alguma programação, mostrar uma mensagem na tela, perguntar algo ao usuário, gerar um alerta, pausar a programação, etc.

A Figura~\ref{fig:inpt_cute} representa a subscrição às VCs ``Em uso'' do AR da cama e ``Ligado'' do AR do fogão. Na mesma figura pode-se observar a atuação no ambiente ao se utilizar as OPs ``Mostrar mensagem'' da televisão e ``Disparar'' do despertador. 

Tanto a VC como a OPs são interfaces, ou portas, do AR. Diferentes aplicações, instaladas no mesmo ambiente podem usar estas interfaces para interagir com o próprio ambiente. O SmartAndroid possui implementado uma estrutura de tipos que facilita a descoberta de ARs de interesse e possibilita o conhecimento de suas interfaces. Na implementação foi criado uma hierarquia de tipos com foco em \textit{smarthomes}, porém novos tipos podem ser criados.

As questões de segurança, inerentes ao problema, são resolvidas com duas técnicas: a própria segurança da rede e com a criação de domínios dentro de um ambiente. A segurança da rede (criptografia de pacotes em redes LAN, como WAP2 e WEP) evita que aplicações estrangeiras possam acessar os recursos de um ambiente. O domínio é uma abstração que provê restrições de acesso aos ARs que contém, o que impõe uma barreira para aplicações maliciosas, que devem requisitar permissão de acesso.

\begin{figure}[ht]
  \centering
  \includegraphics[width=.8\textwidth]{imgs/interpretador-fogao-cute.png}
  \caption{Interpretador de Regra}
  \label{fig:inpt_cute}
\end{figure}

\subsubsection{Interpretação de Contexto} \label{subsubsec-ic}
%falar de maneira geral da interpretação de contexto, do IC e do atuador
A interpretação de contexto tem a função de agregar informações de contexto provenientes de diferentes fontes, considerando também a passagem de tempo, e avaliá-las segundo alguma lógica em específico. O suporte à interpretação de contexto pelo \textit{framework} possibilita uma separação de interesses, onde os desenvolvedores abstraem a implementação de regras de contexto e se mantém suas preocupações com a lógica da aplicação.

A intepretação do contexto é desempenhada por entidades chamadas \mbox{Interpretadores} de Contexto (IC), que avaliam essas informações e notificam agentes atuadores interessados. Agentes atuadores são quaisquer ARs que se subscrevem em ICs para desempenhar ações, sejam estas ações no nível de software (e.g., guardar no histórico, imprimir na tela, enviar para um servidor remoto) ou no nível do ambiente, ao se chamar OPs de outros ARs (e.g., mostrar uma mensagem na televisão, disparar o despertador, mudar a temperatura do ar-condicionado). 
%TODO: não sei se cito também a Figura~\ref{fig:arquitetura}, pq ja vou mostrar o interpretador em alto nivel na Figura~\ref{fig:inpt_cute}

%A interpretação de contexto possibilita que diversas informações de contexto, relacionadas através de uma expressão lógica, sejam manipuladas em uma entidade em separado, provendo separação de interesses. O interessado poderá referenciar apenas uma entidade, ao invés de várias, a fim de se obter a informação interpretada.

%falar do IC em funcionamento
Considere a seguinte regra: se uma pessoa (que mora sozinha) ligou o fogão, se deitou na cama, e passaram-se 15min, então dispare o alarme do dispertador e mostre na televisão a mensagem ``O fogão foi esquecido ligado!''. Este exemplo simplista poderia ser implementando no sistema como representado na Figura~\ref{fig:inpt_cute}. O IC recebe notificações da TV e do fogão com valores atualizados das VCs ``ligado'' e ``em uso'', respectivamente, e resolve internamente a temporização monitorada destas VCs. Uma vez que o IC avaliou a regra como verdadeira durante o tempo de 15min (previamente declarado), ele notifica o atuador ``Lembrar usuário''. O atuador, por sua vez, invoca as OPs ``Mostrar mensagem'' da TV e ``Disparar'' do despertador.

%falar sobre a arquitetura do IC e da sua criação
O IC é também um AR, e estende suas funcionalidades. A arquitetura do IC é composta de um módulo que recebe as notificações e atualiza os valores em cache; uma estrutura de dados em árvore que não só armazena as referências para as VCs e os valores atualizados, mas também a lógica da regra; um módulo que avalia a árvore à cada atualização de valores; e um módulo temporizador, controlado pelo módulo de avaliação.

%falar de temporização

%falar da GUI de composição de regras
A interpretação de contexto visa não só a construção de regras de contexto por parte das aplicações, mas também a definição das preferências dos usuários finais no sistema. Para isto, está sendo desenvolvida uma GUI que possibilite à usuários sem experiência técnica a criar, editar, desabilitar, etc, regras para o seu dia-a-dia. A GUI permitirá que, com poucos toques, um usuário possa selecionar ARs em um mapa da casa, escolher as VCs, comparar~\footnote{Possíveis comparações: $=, \neq, <, >, \leq$ e $\geq$} com valores ou outras VCs, e definir um conjunto de ações a serem desempenhadas no sistema. A definição do conjunto de ações pode ser feita tanto ao se escolher ARs atuadores para entrar em ação (e.g., Atuador Lembrar Usuário), como selecionando ARs no mapa e suas OPs em seguida (e.g., ar-condicionado - mudar temperatura - 20º). %TODO: devo referenciar o mapa que só vou falar mais adiante?

%%%%%%%%%%%%%%%%
%  AVALIACAO   %
%%%%%%%%%%%%%%%%
\section{Avaliação} \label{sec-av}
%falar sobre o que foi desenvolvido para avaliar a qualidade do framework (jogo da velha e aplicação de economia de luz)
A qualidade do \textit{framework} foi avaliada em duas fases. Primeiro foi avaliado o fator de transparência de comunicação na construção de aplicações ubíquas. Esta avaliação ocorre através do processo de transformação de uma aplicação estritamente local \textit{Android} em uma aplicação ubíqua através do \textit{SmartAndroid}. Depois é avaliada a transparência no desenvolvimento de aplicações sensíveis ao contexto e manipulação das informações de contexto promovida pelo Modelo de Contexto.

\subsection{Prova de Eficiência Conceitual}

\begin{figure}[ht]
  \centering
  \includegraphics[height=.8\textwidth]{imgs/app/tictactoe_br.PNG}
  \caption{Comparação entre os modelos das aplicações Android e SmartAndroid}
  \label{fig:tictactoe}
\end{figure}

%descrição da prova de conceito jogo da velha (figura tictactoe)
Para a primeira avaliação utilizou-se a aplicação do jogo da velha como base. Nesta aplicação em sua versão \textit{Android}, os jogadores interagem através de uma mesma tela de dispositivo (\textit{tablet} ou \textit{smartphone}). Na sua versão desenvolvida com o SmartAndroid os jogadores interagem sobre um mesmo tabuleiro em dispositivos diferentes. A Figura~\ref{fig:tictactoe} ilustra o modelo de aplicação das duas versões. A versão original possui o componente da GUI (GUI do Jogo da Velha), Motor do Jogo, a estrutura do Tabuleiro e a identidade dos Jogadores (Jogador) que pode ser do tipo ``X'' ou ``O'' (Tipo <X,O>). O Motor do Jogo atualiza o Tabuleiro, motor o qual atualiza periodicamente a GUI mostrando o novo estado da estrutura. O tipo do Jogador é verificado para indicar qual simbolo da jogada é marcado no tabuleiro (``X'' ou ``O''). 

%\begin{lrbox}{\mylisting}
%\lstset{numbers=left, numberstyle=\tiny, stepnumber=2, numbersep=5pt}  
%\end{lrbox}

%\usebox{\mylisting}% Print box mylisting

%descrição do processo de transformação
Na versão \textit{SmartAndroid} é inserido um AR do jogo para interação remota (Agente do Jogo), o qual esta associado ao Motor de Jogo do dispositivo de um dos Jogadores (Jogador ``X''). O Agente do Jogo intercepta a indicação de jogada deste motor e encaminha para o Agente de Jogo do outro jogador (Jogador ``O''). Este AR do Jogador ``O'' atualiza o tabuleiro com a jogada do Jogador ``X'' (``atualiza'' do ``Game Agent''). Para evitar que um jogador jogue na vez do outro, por exemplo, que o Jogador ``X'' jogue no turno do Jogador ``O'', verifica-se o Tipo do Jogador da vez é o mesmo do que tenta a jogada ("verifica permissão"), tentativa que ocorre através de interação do usuário com a GUI. Na Figura~\ref{fig:tictactoe} as ligações unidirecionais em amarelo indicam as alterações realizadas no processo de transformação. A inicialização do jogo foi modificada para incluir o AR do jogo. É apresentado o Código 1 descrevendo esta etapa com as operações de alto nível definidas na Tabela~\ref{tab:api}.
\begin{lstlisting}[caption=Inicialização do jogo da velha no SmartAndroid]
    List gameList = SDR.search(TYPE, GameAgent); \\Consulta por tipo
    SRR.register(gameAgent); \\Registro do Agente do Jogo (gameAgent)
    if (gameList != null){ \\Caso onde há outro Agente de Jogo
       if (gameList.size()==1) { \\Caso onde há apenas o Jogador X
          gameAgent.setPlayer(Player.Name.O);
       }
       for (iGameAgent : gameList) { \\Subscrição a jogadas 
           iGameAgent.subscribe("indica jogada", gameAgent);
           gameAgent.subscribe("indica jogada", iGameAgent);
       }
    } else { \\Caso onde não há outro jogador
       gameAgent.setPlayer(Player.Name.X);
    }
    gameAgent.setGame((Game)this.game); \\Ligação do AR ao jogo
\end{lstlisting}

%avaliação jogo da velha
Foi observado que o uso de elementos do suporte como SDR e SRR e do esquema de \textit{publish-subscribe} facilitou o processo de transformação da aplicação. Na etapa de inicialização do jogo (Código 1), o SRR foi utilizado para registrar o AR do jogo (Linha 2) e o SDR foi utilizado para descobri-los (Linha 1) e o esquema de \textit{publish-subscribe} foi utilizado para cada participante (jogador ou observador) se subscrever aos movimentos dos jogadores (Linhas 7-10). Após isso, a aplicação segue seu fluxo de execução padrão com o os procedimentos adicionais destacados em amarelo na Figura~\ref{fig:tictactoe}. Portanto, após a etapa de inicialização nenhuma alteração no nível de comunicação ou contexto foi necessária, todas as alterações posteriores ocorreram para promover a interação com o AR do jogo local ao dispositivo. Logo, podemos comprovar que o uso de AR tornou transparente a programação da aplicação ubíqua.

\subsection{Aplicação de Controle de Iluminação Residencial}
%descrição da prova de conceito desta implementação
Dentre os protótipos construídos como provas de conceito, a Aplicação de Controle de Iluminação Residencial (\textit{Smart Light Controller} -- SmartLiC) possibilita a experimentação dos serviços de registro, descoberta e localização dos recursos, assim como o uso da interpretação de contexto, da simulação de ARs, da IPGAP, dentre outros. 

%descrição da aplicação de economia de energia
O intuito do SmartLiC é promover economia no consumo de energia elétrica reduzindo gastos com iluminação. O sistema identifica através de sensores de proximidade a presença/ausência de pessoas no cômodo, conforme a pessoa sai de um cômodo e passam-se 30 segundos sem que ela volte, então a luz daquele cômodo é desligada. Em adição, foi implementado também que se é noite e uma pessoa entrou em um cômodo, então a lâmpada daquele cômodo deve ser ligada, com a opção também de bloquear esta função. 

%\begin{figure}[ht]
%   \centering
%   \includegraphics[height=.4\textwidth]{imgs/ipgap/app_controle_lamps.png}
%   \caption{Aplicação de Controle de Iluminação na IPGAP}
%   \label{fig:app_lamps}
%\end{figure}

%conclusão da avaliação
A execução do SmartLiC exige um tempo de resposta apurado. Com muitas instancias de lâmpadas este tempo pode aumentar, devido ao esquema de publicação por canais \textit{unicast} relativos a cada uma de suas respectivas ARs. Um problema que pode ser resolvido através de uma disseminação de eventos mais eficiente. Uma proposta estudada é a das Redes Endereçadas Por Interesses (REPI)~\cite{dutra2010repi}, na qual sua utilização permite que o interesse do AR em uma VC seja registrado localmente, as mensagens são identificadas com o interesse e apenas nós da rede que tenham o mesmo as manipulam. 


%%%%%%%%%%%%%%%%
% RELACIONADOS %
%%%%%%%%%%%%%%%%
\section{Trabalhos Relacionados} \label{sec-trab_rel}

%trabalhos relacionados a middlewares e frameworks
%\cite{helal2005gator}
Em \cite{helal2005gator} é proposta uma arquitetura de camadas semelhante ao já apresentado neste trabalho. Além destas, há camadas especializadas para aquisição de conhecimento e de contexto, as quais  manipulam a camada de \textit{middleware}. A camada de conhecimento tem função similar ao SGAR, além disso é onde se avalia disponibilidade de recursos para atender as aplicações do ambiente. A camada de contexto tem função similar ao Modelo de Contexto, mas atua em uma granularidade mais grossa. A conclusão é que o nosso \textit{framework} possui uma estrutura semelhante, porém com uma série de mecanismos não considerados em \cite{helal2005gator} para a construção e instalação de novas aplicações. Além disso o \textit{framework} não se restringe apenas ao ambiente residencial inteligente.

Em \cite{ranganathan2005olympus} é proposto um conjunto de operações de alto nível para ambientes inteligentes (espaços ativos). As operações básicas são semelhantes as funções de um sistema operacional, só que ao invés de manipular recursos, entidades do ambiente são manipuladas. Em nosso \textit{framework} há as funções apresentadas na Tabela~\ref{tab:api}. Outras funções como parar, iniciar, suspender, reiniciar são definidas por cada AR e aplicação ubíqua do sistema, permitindo uma distribuição do controle de serviços do ambiente.

Boa parte dos \textit{frameworks} propostos evitam levantar pontos sobre a sobrecarga de comunicação decorrente em sistemas ubíquos. O artigo \cite{villanueva2009framework} é uma proposta com abordagem distribuída para a parte de suporte (SGAR), onde cada componente possui algo semelhante replicado e que utiliza comunicação \textit{multicast} para realizar os serviços. O custo de espaço desta abordagem é muito alto devido a ocorrência de replicação de dados sobre o ambiente, e acaba ocasionando sobrecarga no consumo de energia devido a comunicação excessiva característica do padrão \textit{multicast}.

%\cite{santi2011jaca}
O JaCa-Android~\cite{santi2011jaca} utiliza o esquema de captura de mudança de estado em recursos através de escuta de eventos, o qual é semelhante ao \textit{publish-subscribe}, mas limitado a um mesmo dispositivo. Esta é uma plataforma baseada em agentes para lidar com concorrência, eventos assíncronos, gerenciamento de recursos e sensibilidade ao contexto. Estas características possibilitam a construção de aplicações de manipulação de eventos. Para seu desenvolvimento são utilizadas as ferramentas de programação orientada a agentes. Além de não ser voltado a sistemas distribuídos, esta proposta tem sua abordagem limitada pela a plataforma \textit{Android} por utilizar mecanismos específicos da tecnologia para a captura de eventos. 

O \textit{framework} busca como diferencial que novas aplicações ubíquas possam ser concebidos  de forma dinâmica e adaptativa. A proposta permite ao desenvolvedor de aplicações um aparato ferramental para montar um AmbI personalizado. O desenvolvedor adquire como benefício a separação de interesses, que reduz a carga de codificação de requisitos essenciais de um sistema (e.g. segurança, manutenção). Ainda possui um suporte para construção de regras sobre contextos do ambiente, permitindo prover em alto nível serviços aos usuários do sistema inteligente. 
%essencialmente focamos em sistemas distribuídos, <não vamos falar dos sistemas 
%falar dos sistemas q tb tem uma arquitetura em camadas, mas nas diferenças entre o deles e o nosso


%~\cite{liu2003dios++}
%\cite{Chen2002} \cite{sudha2007ubiquitous} \cite{lee2012mobicon}


%%%%%%%%%%%%%
% CONCLUSÃO %
%%%%%%%%%%%%%
\section{Conclusão e Trabalhos Futuros} \label{sec-conclusao}

%Falar sobre o resultado do que foi visto
Este trabalho esta embasado nas dissertações \cite{douglas2012,matheus2012,david2012} em produção. Neste artigo, foi apresentado o \textit{Framework} de Desenvolvimento de Aplicações Ubíquas em \mbox{Ambientes} Inteligentes, um arcabouço de funcionalidades conceituais que visam facilitar o desenvolvimento e a implantação de aplicações que interajam de forma ubíqua com o ambiente e seus ocupantes. O desenvolvedor, a partir do uso do modelo de componentes e o de contexto, cria serviços que atendam a requisitos preestabelecidos de acordo com as características de um AmbI. Após a concepção de serviços para a AmbI, a implantação ocorre a partir da instalação do conjunto de aplicações sobre uma infraestrutura de rede Wi-Fi segura. Os serviços, após implantados, podem ser manipulados pelos ocupantes através da IPGAP e das interfaces de operações de cada aplicação instalada.

%Destacar pontos relevantes sobre o que foi conseguido
Com propósito de demonstrar e avaliar o \textit{framework}, foram apresentadas duas implementações de aplicações: o jogo da velha com múltiplos participantes, e a aplicação de controle de iluminação residencial. A primeira visa provar a eficiência de uso do modelo de componentes distribuídos através da transformação de uma aplicação local em uma aplicação ubíqua. A segunda aplicação explora a parte da criação de interpretadores de contexto e a utilização do serviço de localização, para controlar a iluminação da residência provendo conforto e economia de energia. Outras aplicações estão em desenvolvimento para ampliar o escopo de avaliação tais como um sistema de saúde residencial~\cite{carvalho2010sciads} e uma aplicação de visualização de vídeo (e.g., filmes, programas televisivos) que segue para a televisão do cômodo para onde o usuário se moveu.

%falar sobre os desafios do futuro
A proposta possui potencial para ampliar suas funcionalidades e atender a outros desafios importantes na área de computação ubíqua e computação sensível ao contexto. A segurança atual das interações promovidas pelas aplicações ubíquas estão limitadas as configurações da rede Wi-Fi, pretende-se evoluir para que este requisito seja refinado na camada do \textit{framework}, na qual restrições de acesso a determinados ocupantes e entre diferentes domínios de aplicações são pontos importantes da abordagem futura. Outro ponto está na economia de energia, boa parte dos dispositivo possuem fontes de energias restritas, então atender este requisito visa tanto aumentar seu tempo de vida como reduzir o gasto total do ambiente. Na parte de Computação Sensível ao Contexto, pretende-se identificar as preferências do usuário de forma menos intrusiva através de técnicas de mineração de dados aliadas a aprendizagem de máquina. Além disso, proporcionar ao usuário uma interface compreensível para definição de regras de contexto permitindo um controle facilitado e dinâmico dos serviços do AmbI.


%\cite{boulic:91}
%\nocite{abowd1999towards}
%\nocite{Brandle2007}
%\nocite{Cardoso2006}
%\nocite{Chen2002}
%\nocite{chen2010context}
%\nocite{Dey2001}
%\nocite{lee2012mobicon}
%\nocite{liu2003dios++}
%\nocite{sudha2007ubiquitous}
%\nocite{wang2005towards}


\bibliographystyle{sbc}
\bibliography{references}

\end{document}
